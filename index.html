
<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
  <title>HankLiu的博客小屋</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="努力去听风的声音，不必在意风的方向。">
<meta property="og:type" content="website">
<meta property="og:title" content="HankLiu的博客小屋">
<meta property="og:url" content="https://hankliu62.github.io/index.html">
<meta property="og:site_name" content="HankLiu的博客小屋">
<meta property="og:description" content="努力去听风的声音，不必在意风的方向。">
<meta property="og:locale" content="zh-cn">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HankLiu的博客小屋">
<meta name="twitter:description" content="努力去听风的声音，不必在意风的方向。">
  
  
    <link rel="icon" href="/img/favicon.ico" sizes="16x16">
  
  <link rel="stylesheet" href="/css/style.css?t=1">
  
    <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
  

</head>
</html>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner">
    <div id="banner-mask"></div>
  </div>
  <div id="header-outer" class="outer">
    <nav id="upper-nav" class="inner">
      <a id="main-nav-toggle" class="nav-icon"></a>
      <div class="sub-nav">
        
        
          <a id="nav-github" class="nav-icon" href="https://github.com/hankliu62"></a>
        
      </div>
    </nav>
    <div id="header-title">
      
        <h1 id="blog-title-wrap">
          <a href="/" id="blog-title">HankLiu的博客小屋</a>
        </h1>
      
      
        <h5 class="blog-subtitle-wrap">努力去听风的声音，不必在意风的方向。</h5>
      
    </div>
    <div id="contenedor">
      <ul class="cube">
        <li class="cara"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="100" width="100" viewBox="-50 -50 200 200">
          <circle cx="50" cy="50" r="45" stroke-width="5" stroke="black" stroke-opacity="0.5" fill-opacity="0"></circle>
          <rect id="clockwise" x="47.5" y="27.5" width="5" height="25" rx="2.5" ry="2.5" fill="black" fill-opacity="0.5" transform="rotate(330 50 50)"></rect>
          <rect id="minute" x="48.5" y="16.5" width="3" height="35" rx="1.5" ry="1.5" fill="black" fill-opacity="0.5"></rect>
        </svg></li>
        <li class="cara">P</li>
        <li class="cara">X</li>
        <li class="cara">L</li>
        <li class="cara">C</li>
        <li class="cara">Y</li>
      </ul>
    </div>
    <nav id="main-nav">
      
        <a class="main-nav-link" href="/">主页</a>
      
        <a class="main-nav-link" href="/archives">文章</a>
      
        <a class="main-nav-link" href="/toolbox-frontend">小工具</a>
      
        <a class="main-nav-link" href="/resume">小简介</a>
      
    </nav>
  </div>
</header>

    <div class="outer">
      <section id="main">
  
    <article id="post-commomly-css" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2024/02/29/commomly-css/" class="article-date">
  <time datetime="2024-02-29T10:20:12.000Z" itemprop="datePublished">2024-02-29</time>
</h3>
    
  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content fill-content-true">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/02/29/commomly-css/">常用的CSS技巧</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>网站平滑滚动</li>
</ol>
<p>在<code>&lt;html&gt;</code>元素中添加scroll-behavior: smooth，以实现整个页面的平滑滚动。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">scroll-behavior</span>: smooth;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>链接的属性选择器</li>
</ol>
<p>此选择器的目标是具有以“https”开头的 href 属性的链接。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href^=<span class="string">"https"</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>〜合并兄弟姐妹</li>
</ol>
<p>选择 <code>&lt;h2&gt;</code> 后面的所有兄弟元素 <code>&lt;p&gt;</code> 元素。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h2</span> ~ <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>:not() 伪类</li>
</ol>
<p>该选择器将样式应用于不具有“特殊”类的列表项。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:not(.special)</span> &#123;</span><br><span class="line">  <span class="attribute">font-stlye</span>: italic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>用于响应式排版的视口单位</li>
</ol>
<p>使用视口单位（vw、vh、vmin、vmax）可以使字体大小响应视口大小。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">5vw</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="6">
<li><code>:empty</code> 表示空元素</li>
</ol>
<p>此选择器定位空的 <code>&lt;p&gt;</code> 元素并隐藏它们。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:empty</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>自定义属性（变量）</li>
</ol>
<p>可以定义和使用自定义属性，以更轻松地设置主题和维护。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attribute">--main-color</span>: <span class="number">#3498db</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--main-color);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="8">
<li>图像控制的Object-fit属性</li>
</ol>
<p><strong>object-fit</strong> 控制如何调整替换元素（如 <code>&lt;img&gt;</code>）的内容大小。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/2024/02/29/commomly-css/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li></ul>

        <a data-url="https://hankliu62.github.io/2024/02/29/commomly-css/" data-id="cltd13buy0001celosdgkx6l5" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
</article>



  
    <article id="post-interview-questions" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2024/02/08/interview-questions/" class="article-date">
  <time datetime="2024-02-08T04:12:26.000Z" itemprop="datePublished">2024-02-08</time>
</h3>
    
  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content fill-content-true">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/02/08/interview-questions/">前端面试题汇总</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Event-Loop"><a href="#Event-Loop" class="headerlink" title="Event Loop"></a>Event Loop</h2><p>Event Loop即事件循环，是指浏览器或者Nodejs解决javascript单线程运行时异步逻辑不会阻塞的一种机制。</p>
<p>Event Loop是一个执行模型，不同的运行环境有不同的实现，浏览器和nodejs基于不同的技术实现自己的event loop。</p>
<ul>
<li>浏览器的Event Loop是在HTML5规范中明确定义。</li>
<li>Nodejs的Event Loop是libuv实现的。</li>
<li>libuv已经对Event Loop作出了实现，HTML5规范中只是定义的浏览器中Event Loop的模型，具体的实现交给了浏览器厂商。</li>
</ul>
<h3 id="宏队列和微队列"><a href="#宏队列和微队列" class="headerlink" title="宏队列和微队列"></a>宏队列和微队列</h3><p>在javascript中，任务被分为两种，一种为宏任务(macrotask)，也称为task，一种为微任务(microtask)，也称为jobs。</p>
<p>宏任务主要包括:</p>
<ul>
<li>script全部代码</li>
<li>setTimeout</li>
<li>setInterval</li>
<li>setImmediate (Nodejs独有，浏览器暂时不支持，只有IE10支持)</li>
<li>requestAnimationFrame (浏览器独有)</li>
<li>I/O</li>
<li>UI rendering (浏览器独有)</li>
</ul>
<p>微任务主要包括:</p>
<ul>
<li>process.nextTick (Nodejs独有)</li>
<li>Promise</li>
<li>Object.observe (废弃)</li>
<li>MutationObserver</li>
</ul>
<h3 id="浏览器中的Event-Loop"><a href="#浏览器中的Event-Loop" class="headerlink" title="浏览器中的Event Loop"></a>浏览器中的Event Loop</h3><p>Javascript 有一个主线程 main thread 和 一个调用栈(执行栈) call-stack，所有任务都会被放到调用栈等待主线程的执行。</p>
<p>JS调用栈采用的是后进先出的规则，当函数执行时，会被添加到调用栈的顶部，当执行栈执行完后，就会从栈顶移除，直到栈内被清空。</p>
<p>Javascript单线程任务可以分为同步任务和异步任务，同步任务会在调用栈内按照顺序依次被主线程执行，异步任务会在异步任务有了结果后，将注册的回调函数放入任务队列中等待主线程空闲的时候（调用栈被清空的时候），被读取到调用栈内等待主线程的执行</p>
<p>任务队列 Task Queue, 是先进先出的数据结构。</p>
<p><img src="https://user-images.githubusercontent.com/8088864/124855609-c2904a00-dfdb-11eb-9138-df80150fa3a3.jpg" alt="浏览器事件循环的进程模型"></p>
<p>浏览器Event Loop的具体流程:</p>
<ol>
<li>执行全局Javascript的同步代码，可能包含一些同步语句，也可以是异步语句(setTimeout语句不执行回调函数里面的，Promise中.then之前的语句)</li>
<li>全局Javascript执行完毕后，调用栈call-stack会被清空</li>
<li>从微队列microtask queue中取出位于首部的回调函数，放入到调用栈call-stack中执行，执行完毕后从调用栈中删除，microtask queue的长度减1。</li>
<li>继续从微队列microtask queue的队首取出任务，放到调用栈中执行，依次循环往复，直至微任务队列microtask queue中的任务都被调用栈执行完毕。<strong>特别注意，如果在执行微任务microtask过程中，又产生了微任务microtask，新产生的微任务也会追加到微任务队列microtask queue的尾部，新生成的微任务也会在当前周期中被执行完毕。</strong></li>
<li>microtask queue中的任务都被执行完毕后，microtask queue为空队列，调用栈也处于空闲阶段</li>
<li>执行UI rendering</li>
<li>从宏队列macrotask queue的队首取出宏任务，放入调用栈中执行。</li>
<li>执行完后，调用栈为空闲状态</li>
<li>重复 3 - 8 的步骤，直至宏任务队列的任务都被执行完毕。<br>…</li>
</ol>
<p>浏览器Event Loop的3个重点:</p>
<ol>
<li>宏队列macrotask queue每次只从中取出一个任务放到调用栈中执行，执行完后去执行微任务队列中的所有任务</li>
<li>微任务队列中的所有任务都会依次取出来执行，只是微任务队列中的任务清空</li>
<li>UI rendering 的执行节点在微任务队列执行完毕后，宏任务队列中取出任务执行之前执行</li>
</ol>
<h3 id="NodeJs中的Event-Loop"><a href="#NodeJs中的Event-Loop" class="headerlink" title="NodeJs中的Event Loop"></a>NodeJs中的Event Loop</h3><p>libuv结构</p>
<p><img src="https://user-images.githubusercontent.com/8088864/125010304-d64db600-e098-11eb-824f-de433a12a095.png" alt="libuv的事件循环模型"></p>
<p>NodeJs中的宏任务队列和微任务队列</p>
<p>NodeJs的Event Loop中，执行宏任务队列的回调有6个阶段</p>
<p><img src="https://user-images.githubusercontent.com/8088864/125010342-e9608600-e098-11eb-84e0-70a5bd5f5867.png" alt="NodeJS中的宏队列执行回调的6个阶段"></p>
<p>Node的Event Loop可以分为6个阶段，各个阶段执行的任务如下所示:</p>
<ul>
<li><code>timers</code>: 执行setTimeout和setInterval中到期的callback。</li>
<li><code>I/O callbacks</code>: 执行几乎所有的回调，除了close callbacks以及timers调度的回调和setImmediate()调度的回调。</li>
<li><code>idle, prepare</code>: 仅在内部使用。</li>
<li><code>poll</code>: 最重要的阶段，检索新的I/O事件，在适当的情况下回阻塞在该阶段。</li>
<li><code>check</code>: 执行setImmediate的callback(setImmediate()会将事件回调插入到事件队列的尾部，主线程和事件队列的任务执行完毕后会立即执行setImmediate中传入的回调函数)。</li>
<li><code>close callbacks</code>: 执行<code>close</code>事件的callback，例如socket.on(‘close’, fn)或则http.server.on(‘close’, fn)等。</li>
</ul>
<p>NodeJs中的宏任务队列可以分为下列4个:</p>
<ol>
<li>Timers Queue</li>
<li>I/O Callbacks Queue</li>
<li>Check Queue</li>
<li>Close Callbacks Queue</li>
</ol>
<p>在浏览器中只有一个宏任务队列，所有宏任务都会放入到宏任务队列中等待放入执行栈中被主线程执行，NodeJs中有4个宏任务队列，不同类型的宏任务会被放入到不同的宏任务队列中。</p>
<p>NodeJs中的微任务队列可以分为下列2个:</p>
<ol>
<li><code>Next Tick Queue</code>: 放置process.nextTick(callback)的回调函数</li>
<li><code>Other Micro Queue</code>: 其他microtask，例如Promise等</li>
</ol>
<p>在浏览器中只有一个微任务队列，所有微任务都会放入到微任务队列中等待放入执行栈中被主线程执行，NodeJs中有2个微任务队列，不同类型的微任务会被放入到不同的微任务队列中。</p>
<p><img src="https://user-images.githubusercontent.com/8088864/125030923-71a55200-e0be-11eb-93be-95f1cbc456e3.png" alt="NodeJs事件循环"></p>
<p>NodeJs的Event Loop的具体流程:</p>
<ol>
<li>执行全局Javascript的同步代码，可能包含一些同步语句，也可以是异步语句(setTimeout语句不执行回调函数里面的，Promise中.then之前的语句)。</li>
<li>执行微任务队列中的微任务，先执行Next Tick Queue队列中的所有的所有任务，再执行Other Micro Queue队列中的所有任务。</li>
<li>开始执行宏任务队列中的任务，共6个阶段，从第1个阶段开始执行每个阶段对应宏任务队列中的所有任务，<strong>注意，这里执行的是该阶段宏任务队列中的所有的任务，浏览器Event Loop每次只会中宏任务队列中取出队首的任务执行，执行完后开始执行微任务队列中的任务，NodeJs的Event Loop会执行完该阶段中宏任务队列中的所有任务后，才开始执行微任务队列中的任务，也就是步骤2</strong>。</li>
<li>Timers Queue -&gt; 步骤2 -&gt; I/O Callbacks Queue -&gt; 步骤2 -&gt; Check Queue -&gt; 步骤2 -&gt; Close Callback Queue -&gt; 步骤2 -&gt; Timers Queue -&gt; ……</li>
</ol>
<p><strong>特别注意:</strong></p>
<ul>
<li>上述的第三步，当 NodeJs 版本小于11时，NodeJs的Event Loop会执行完该阶段中宏任务队列中的所有任务</li>
<li>当 NodeJS 版本大于等于11时，<strong>在timer阶段的setTimeout,setInterval…和在check阶段的setImmediate都在node11里面都修改为一旦执行一个阶段里的一个任务就立刻执行微任务队列</strong>。为了和浏览器更加趋同。</li>
</ul>
<p>NodeJs的Event Loop的microtask queue和macrotask queue的执行顺序详情</p>
<p><img src="https://user-images.githubusercontent.com/8088864/125032436-8aaf0280-e0c0-11eb-926a-30be5bf116f9.png" alt="NodeJS中的微任务队列执行顺序"></p>
<p><img src="https://user-images.githubusercontent.com/8088864/125032451-8f73b680-e0c0-11eb-8349-d6c5f20bd11a.png" alt="NodeJS中的宏任务队列执行顺序"></p>
<p>当setTimeout(fn, 0)和setImmediate(fn)放在同一同步代码中执行时，可能会出现下面两种情况：</p>
<ol>
<li><strong>第一种情况</strong>: 同步代码执行完后，timer还没到期，setImmediate中注册的回调函数先放入到Check Queue的宏任务队列中，先执行微任务队列，然后开始执行宏任务队列，先从Timers Queue开始，由于在Timer Queue中未发现任何的回调函数，往下阶段走，直到Check Queue中发现setImmediate中注册的回调函数，先执行，然后timer到期，setTimeout注册的回调函数会放入到Timers Queue的宏任务队列中，下一轮后再次执行到Timers Queue阶段时，才会再Timers Queue中发现了setTimeout注册的回调函数，于是执行该timer的回调，所以，<strong>setImmediate(fn)注册的回调函数会早于setTimeout(fn, 0)注册的回调函数执行</strong>。</li>
<li><p><strong>第二种情况</strong>: 同步代码执行完之前，timer已经到期，setTimeout注册的回调函数会放入到Timers Queue的宏任务队列中，执行同步代码到setImmediate时，将其回调函数注册到Check Queue中，同步代码执行完后，先执行微任务队列，然后开始执行宏任务队列，先从Timers Queue开始，在Timers Queue发现了timer中注册的回调函数，取出执行，往下阶段走，到Check Queue中发现setImmediate中注册的回调函数，又执行，所以这种情况时，<strong>setTimeout(fn, 0)注册的回调函数会早于setImmediate(fn)注册的回调函数执行</strong>。</p>
</li>
<li><p>在同步代码中同时调setTimeout(fn, 0)和setImmediate执行顺序情况是不确定的，但是如果把他们放在一个IO的回调，比如readFile(‘xx’, function () {// ….})回调中，那么IO回调是在I/O Callbacks Queue中，setTimeout到期回调注册到Timers Queue，setImmediate回调注册到Check Queue，I/O Callbacks Queue执行完到Check Queue，Timers Queue得到下个循环周期，所以setImmediate回调这种情况下肯定比setTimeout(fn, 0)回调先执行。</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">setImmediate(<span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  setImmediate(<span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">2</span>);&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'TIMEOUT FIRED'</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行结果: 会存在下面两种情况</span></span><br><span class="line"><span class="comment">// 第一种情况:</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// TIMEOUT FIRED</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种情况:</span></span><br><span class="line"><span class="comment">// TIMEOUT FIRED</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>注:</p>
<ul>
<li>setImmediate中如果又存在setImmediate语句，内部的setImmediate语句注册的回调函数会在下一个<code>check</code>阶段来执行，并不在当前的<code>check</code>阶段来执行。</li>
</ul>
<p>poll 阶段详解:</p>
<p>poll 阶段主要又两个功能:</p>
<ol>
<li>当timers到达指定的时间后，执行指定的timer的回调(Executing scripts for timers whose threshold has elapsed, then)。</li>
<li>处理poll队列的事件(Processing events in the poll queue)。</li>
</ol>
<p>当进入到poll阶段，并且没有timers被调用的时候，会出现下面的情况:</p>
<ul>
<li>如果poll队列不为空，Event Loop将同步执行poll queue中的任务，直到poll queue队列为空或者执行的callback达到上限。</li>
<li>如果poll队列为空，会发生下面的情况:<ul>
<li>如果脚本执行过setImmediate代码，Event Loop会结束poll阶段，直接进入check阶段，执行Check Queue中调用setImmediate注册的回调函数。</li>
<li>如果脚本没有执行过setImmediate代码，poll阶段将等待callback被添加到队列中，然后立即执行。</li>
</ul>
</li>
</ul>
<p>当进入到poll阶段，并且调用了timers的话，会发生下面的情况:</p>
<ul>
<li>一旦poll queue为空，Event Loop会检测Timers Queue中是否存在任务，如果存在任务的话，Event Loop会回到timer阶段并执行Timers Queue中timers注册的回调函数。<strong>执行完后是进入check阶段，还是又重新进入I/O callbacks阶段?</strong></li>
</ul>
<p>setTimeout 对比 setImmediate</p>
<ul>
<li>setTimeout(fn, 0)在timers阶段执行，并且是在poll阶段进行判断是否达到指定的timer时间才会执行</li>
<li>setImmediate(fn)在check阶段执行</li>
</ul>
<p>两者的执行顺序要根据当前的执行环境才能确定：</p>
<ul>
<li>如果两者都在主模块(main module)调用，那么执行先后取决于进程性能，顺序随机</li>
<li>如果两者都不在主模块调用，即在一个I/O Circle中调用，那么setImmediate的回调永远先执行，因为会先到Check阶段</li>
</ul>
<p>setImmediate 对比 process.nextTick</p>
<ul>
<li>setImmediate(fn)的回调任务会插入到宏队列Check Queue中</li>
<li>process.nextTick(fn)的回调任务会插入到微队列Next Tick Queue中</li>
<li>process.nextTick(fn)调用深度有限制，上限是1000，而setImmediate则没有</li>
</ul>
        
          <p class="article-more-link">
            <a href="/2024/02/08/interview-questions/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/interview/">interview</a></li></ul>

        <a data-url="https://hankliu62.github.io/2024/02/08/interview-questions/" data-id="cltd13bx20018celohue5qujd" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
</article>



  
    <article id="post-github-pages" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2024/02/07/github-pages/" class="article-date">
  <time datetime="2024-02-07T04:20:26.000Z" itemprop="datePublished">2024-02-07</time>
</h3>
    
  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content fill-content-true">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/02/07/github-pages/">使用 Github Pages 和 Issues 搭建博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="Github-Pages-简介"><a href="#Github-Pages-简介" class="headerlink" title="Github Pages 简介"></a>Github Pages 简介</h2><p>自己维护博客服务器，需要购买服务器，配置域名等一些列操作，比较繁琐，索性直接找个现成的稳定的博客平台，github pages成为首选，这里有几个思路</p>
<ul>
<li>使用github pages，编写静态网页</li>
<li>使用github pages 与静态网页生成工具，需要本地电脑编写文章</li>
<li>使用github pages 与自建后端服务器，需要另外维护一个后端服务器</li>
<li>使用issues 写文章，issues页面就是一个博客网站</li>
<li>使用github pages 与 github api，使用issues写文章</li>
</ul>
<h3 id="使用github-pages，编写静态网页"><a href="#使用github-pages，编写静态网页" class="headerlink" title="使用github pages，编写静态网页"></a>使用github pages，编写静态网页</h3><p>有很多文档网站是使用这种方式搭建，一般是作为demo页面或者单页文档页面，否则页面稍微一复杂，就变得非常难以维护</p>
<h3 id="使用github-pages-与-静态网页生成工具"><a href="#使用github-pages-与-静态网页生成工具" class="headerlink" title="使用github pages 与 静态网页生成工具"></a>使用github pages 与 静态网页生成工具</h3><p>有很多博客网站与文档网站都是使用这种方式，这是一种最简单最方便的方式，现在流行的工具有 <code>hexo</code> 和 <code>Jekyll</code> 等，这种方式还要在本地维护一个仓库，生成静态页面后再上传，操作过于繁琐，而且每个页面之间切换都需要重新载入所有资源，网页数据传输量较大</p>
<p>具体工具如下所示:</p>
<ul>
<li><a href="https://github.com/hexojs/hexo" target="_blank" rel="noopener">hexo</a></li>
<li><a href="https://github.com/jekyll/jekyll" target="_blank" rel="noopener">Jekyll</a></li>
</ul>
<h3 id="使用github-pages-与-自建后端服务器"><a href="#使用github-pages-与-自建后端服务器" class="headerlink" title="使用github pages 与 自建后端服务器"></a>使用github pages 与 自建后端服务器</h3><p>在github pages编写一个单页面应用，数据通过跨域请求来自于自建的服务器，这种方式有三大难点：前端、后端、服务器</p>
<p><strong>前端</strong></p>
<p>需要编写一个单页面应用，这对技术需要一定的水平，基本很少有开源工具</p>
<p><strong>后端</strong></p>
<p>需要后端服务，这可以使用现成工具提供api，比如wordpress、drupal、ghost等</p>
<h3 id="使用issues-写文章"><a href="#使用issues-写文章" class="headerlink" title="使用issues 写文章"></a>使用issues 写文章</h3><p>这种方式简单粗暴，直接在issues写文章，评论、标签、提醒神马的都有了，现在其实很流行这种方式，看看这几个博客，都几千个star了</p>
<ul>
<li><a href="https://github.com/tmallfe/tmallfe.github.io" target="_blank" rel="noopener">https://github.com/tmallfe/tmallfe.github.io</a></li>
<li><a href="https://github.com/xufei/blog" target="_blank" rel="noopener">https://github.com/xufei/blog</a></li>
<li><a href="https://github.com/fouber/blog" target="_blank" rel="noopener">https://github.com/fouber/blog</a></li>
</ul>
<p>要说它的缺点嘛，就是人人都可以往你博客提交文章，界面千篇一律，而且也不怎么好看</p>
<p><strong>服务器</strong></p>
<p>这个问题很严重，问题来了，你都有自建的服务器了，还要用github pages干嘛呢，哪天自建服务器挂了，博客照样挂。</p>
<p>这种方式可以使用域名来提升逼格。</p>
<h3 id="使用github-pages-与-github-api"><a href="#使用github-pages-与-github-api" class="headerlink" title="使用github pages 与 github api"></a>使用github pages 与 github api</h3><p>这种方案与上一种对比起来其实没多大区别，唯一的区别就是自建服务换成了github的另一个服务，就是说，github帮我们建好了。<br>github api：<a href="https://developer.github.com/v3/" target="_blank" rel="noopener">https://developer.github.com/v3/</a></p>
<h4 id="github-pages"><a href="#github-pages" class="headerlink" title="github pages"></a>github pages</h4><p>github Pages可以被认为是用户编写的、托管在github上的静态网页，如下方式可开启：</p>
<p>当仓库名称为<code>{username}.github.io</code>时自动生成github page首页，页面地址为 <code>http://{username}.github.io</code><br>当仓库中有 <code>gh-pages</code>分支时会自动生成github pages，访问地址为：<code>http://{username}.github.io/{reponame}</code></p>
<h4 id="github-api"><a href="#github-api" class="headerlink" title="github api"></a>github api</h4><p>github 提供了一系列api可让用户操作数据，详细内容可到<a href="https://docs.github.com/zh/rest" target="_blank" rel="noopener">api官网</a>查看</p>
<h4 id="github-pages-github-api搭建博客"><a href="#github-pages-github-api搭建博客" class="headerlink" title="github pages + github api搭建博客"></a>github pages + github api搭建博客</h4><p>现在讲解实现github pages + github api的思路，首先我们需要一个单页面应用，应用托管于<code>{username}.github.io</code>仓库。然后我们需要知道如何通过api 获取 issues 内容</p>
<p>最近开始在github上，利用issue写blog，最开始是看到一篇github的文章，发现issue竟然还能用来写blog，觉得实在是很有趣，不知不觉自己就开始，发现什么问题就往issue上写，生怕过阵子就忘记。然后觉得越发有趣，就打算折腾一下，就issue作为自己的数据库，将issue展示在自己的blog上</p>
<p>github提供了很多的api，其中就有关于issue的api，现在我也是仅仅会用那么一点点，多点都不会，看github的api文档我也是看的不是很懂，最后也就通过各种的google，找到了窍门，下面来说一下，怎么获取目标项目的issue列表。</p>
<p><strong>单页面</strong></p>
<p>这个单页面很简单，大概只需要两个页面：列表与详情，应用必须有路由系统，而且应当只使用 hash 路由。</p>
<p><strong>issues api</strong></p>
<p>官方文档： <a href="https://developer.github.com/v3/issues/" target="_blank" rel="noopener">https://developer.github.com/v3/issues/</a></p>
<p>列出了操作issues接口，我们暂时只用到 查看 功能。</p>
<p><strong>列出issues</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 基本使用api</span><br><span class="line">https://api.github.com/repos/:username/:repository/issues</span><br><span class="line"></span><br><span class="line">// 我的</span><br><span class="line">GET https://api.github.com/repos/hankliu62/hankliu62.github.com/issues</span><br></pre></td></tr></table></figure>
<p>每条issues都有详细信息，包括标题、内容、标签、用户，时间等等信息。</p>
<p>可以使用查询过滤或排序issues，比如以最近评论时间排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 基本使用api</span><br><span class="line">https://api.github.com/repos/:username/:repository/issues?filter=updated</span><br><span class="line"></span><br><span class="line">// 我的</span><br><span class="line">GET https://api.github.com/repos/hankliu62/hankliu62.github.com/issues?filter=updated</span><br></pre></td></tr></table></figure>
<p><a href="https://api.github.com/repos/hankliu62/hankliu62.github.com/issues" target="_blank" rel="noopener">直接浏览器访问</a>，会返回一串很长很长的json，默认会返回30条issue，每条issue都包含了很多的内容，都是一目了然，一看就知道是什么数据，然后，再说一下怎么按需的地返回需要的json，关于参数，我暂时也不知道在哪里可以看到文档，看官网的api文档，并没有说到一下的几个参数。这个几个参数是我研究别人的代码看到的，实践过确实有效，附上我研究的代码github项目</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">page: [int], // 当前页</span><br><span class="line">per_page: [int] // 获取的条数</span><br></pre></td></tr></table></figure>
<p>这两个参数可以用get的方式带上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// api</span><br><span class="line">GET https://api.github.com/repos/hankliu62/hankliu62.github.com/issues?page=1&amp;per_page=10</span><br></pre></td></tr></table></figure>
<p><strong>列出issues，增加获取访问上限</strong><br>据说，使用匿名的方式请求api，每天只能访问60次，假如你觉得你访问的频数会比较大（你就继续骗自己吧）你可以通过access_token来请求issue的api，上限是多少？<br>首先是获取access_token，你需要进入<a href="https://github.com/settings/tokens" target="_blank" rel="noopener">传送门</a>添加access_token</p>
<p><img src="https://github.com/hankliu62/hankliu62.github.com/assets/8088864/39482beb-4ba1-42ce-b490-55206b0fcc3d" alt="Access Token"></p>
<p>填描述，基本勾选repo就够，点击生产Token按钮。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// api</span><br><span class="line">GET https://api.github.com/repos/hankliu62/hankliu62.github.com/issues?access_token=&lt;access_token&gt;&amp;page=1&amp;per_page=10</span><br></pre></td></tr></table></figure>
<p>注：<br>在Github pages里面设置了 access_token 报错 Bad credentials。是 Github 限制了 access_token 访问。如果是一个完整的 token 字符串，Github 是不允许的。需将其拆分开。可以将 access_token 写成数组，用到时再拼接成字符串。</p>
<p><strong>获取单条issues</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 基本使用api</span><br><span class="line">https://api.github.com/repos/:username/:repository/issues/1</span><br><span class="line"></span><br><span class="line">// 我的</span><br><span class="line">GET https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/1</span><br></pre></td></tr></table></figure>
<p>注意：这里的1是指的是issues对象中的number而不是id</p>
<p><strong>获取评论</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 基本使用api</span><br><span class="line">https://api.github.com/repos/:username/:repository/issues/1/comments</span><br><span class="line"></span><br><span class="line">// 我的</span><br><span class="line">GET https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/1/comments</span><br></pre></td></tr></table></figure>
<p><strong>获取labels</strong></p>
<p>labels可用作与 分类 或 标签 功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 基本使用api</span><br><span class="line">https://api.github.com/repos/:username/:repository/labels</span><br><span class="line"></span><br><span class="line">// 我的</span><br><span class="line">GET https://api.github.com/repos/hankliu62/hankliu62.github.com/labels</span><br></pre></td></tr></table></figure>
<h2 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h2><p>生成github pages 后有一个二级域名：<code>username.github.io</code>，我们也可以使用自己的域名，方法：</p>
<p>在仓库根目录新建文件，命名为 <code>CNAME</code><br>文件内容第一行写上域名(不要包含 http:// 和 https:// )，保存并上传至仓库<br>在域名解析后台添加cname记录，值为 <code>username.github.io</code><br>过两分钟可生效。</p>
<p>经过测试，能绑定多个域名，在<code>CNAME</code>文件中，一行一个域名</p>

      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/github-pages/">github pages</a></li></ul>

        <a data-url="https://hankliu62.github.io/2024/02/07/github-pages/" data-id="cltd13bv20003celob6nirdkp" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
</article>



  
    <article id="post-git-clone-failure" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2018/11/09/git-clone-failure/" class="article-date">
  <time datetime="2018-11-09T02:00:20.000Z" itemprop="datePublished">2018-11-09</time>
</h3>
    
  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content fill-content-true">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/09/git-clone-failure/">使用 git 克隆 github 上的项目失败</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h2><p>今天在使用 git clone nextjs demo project 源代码的时， git clone <a href="https://github.com/Weibozzz/next-blog.git" target="_blank" rel="noopener">https://github.com/Weibozzz/next-blog.git</a> 下载速度很慢，然后下载一段时间后，总是提示下面的错误信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nCloning into 'next-blog'...</span><br><span class="line">remote: Enumerating objects: 111, done.</span><br><span class="line">remote: Counting objects: 100% (111/111), done.</span><br><span class="line">remote: Compressing objects: 100% (83/83), done.</span><br><span class="line">error: RPC failed; curl 18 transfer closed with outstanding read data remaining</span><br><span class="line">fatal: The remote end hung up unexpectedly</span><br><span class="line">fatal: early EOF</span><br><span class="line">fatal: index-pack failed</span><br></pre></td></tr></table></figure>
<h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>由于Http协议错误，当 pull 或者 clone 的时候，或者是 github 某个CDN被伟大的墙屏蔽所致。</p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><h3 id="协议错误"><a href="#协议错误" class="headerlink" title="协议错误"></a>协议错误</h3><ol>
<li><p>先执行下列命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.postBuffer 524288000</span><br></pre></td></tr></table></figure>
</li>
<li><p>再执行git pull 或者 git clone命令</p>
</li>
</ol>
<h3 id="墙屏蔽"><a href="#墙屏蔽" class="headerlink" title="墙屏蔽"></a>墙屏蔽</h3><ol>
<li><p>访问 <a href="http://github.global.ssl.fastly.net.ipaddress.com/#ipinfo" target="_blank" rel="noopener">http://github.global.ssl.fastly.net.ipaddress.com/#ipinfo</a><br>获取cdn域名以及IP地址</p>
</li>
<li><p>访问 <a href="http://github.com.ipaddress.com/#ipinfo" target="_blank" rel="noopener">http://github.com.ipaddress.com/#ipinfo</a> 获取cdn域名以及IP地址        <img src="https://user-images.githubusercontent.com/8088864/48385665-42ca5880-e72a-11e8-9281-d825b6f66fe8.png" alt="cdn域名以及IP地址"></p>
</li>
<li><p>将上述获取的IP地址添加到<code>/etc/hosts</code>中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/hosts</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/8088864/48385763-bcfadd00-e72a-11e8-96ff-4f14ed1ba521.png" alt="添加IP地址到hosts"></p>
</li>
<li><p>刷新dns缓存</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo killall -HUP mDNSResponder</span><br><span class="line">sudo dscacheutil -flushcache</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>再执行 git clone 操作的时候，速度飕飕飕的上去了，一下子达到几百Kb啦~</p>

      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/github/">github</a></li></ul>

        <a data-url="https://hankliu62.github.io/2018/11/09/git-clone-failure/" data-id="cltd13bv40004celoh6y5z7tn" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
</article>



  
    <article id="post-web-mobile-tools-weinre" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2017/09/19/web-mobile-tools-weinre/" class="article-date">
  <time datetime="2017-09-19T10:55:37.000Z" itemprop="datePublished">2017-09-19</time>
</h3>
    
  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content fill-content-true">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/19/web-mobile-tools-weinre/">使用Weinre调试移动端Web开发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="一、使用Npm全局安装weinre"><a href="#一、使用Npm全局安装weinre" class="headerlink" title="一、使用Npm全局安装weinre"></a>一、使用Npm全局安装weinre</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -g install weinre</span><br></pre></td></tr></table></figure>
<h2 id="二、引入js文件"><a href="#二、引入js文件" class="headerlink" title="二、引入js文件"></a>二、引入js文件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"http://192.168.225.198:8081/target/target-script-min.js#anonymous"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="三、启动-Weinre-Debug-服务端"><a href="#三、启动-Weinre-Debug-服务端" class="headerlink" title="三、启动 Weinre Debug 服务端"></a>三、启动 Weinre Debug 服务端</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weinre --httpPort 8081 --boundHost -all-</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mobile/">mobile</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/weinre/">weinre</a></li></ul>

        <a data-url="https://hankliu62.github.io/2017/09/19/web-mobile-tools-weinre/" data-id="cltd13bva000aceloc85u9q67" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
</article>



  
    <article id="post-commonly-shell-command" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2017/09/14/commonly-shell-command/" class="article-date">
  <time datetime="2017-09-14T05:10:16.000Z" itemprop="datePublished">2017-09-14</time>
</h3>
    
  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content fill-content-true">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/14/commonly-shell-command/">常用的shell命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="一、SSH到服务器上再执行shell命令"><a href="#一、SSH到服务器上再执行shell命令" class="headerlink" title="一、SSH到服务器上再执行shell命令"></a>一、SSH到服务器上再执行shell命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ssh -t root@192.168.111.111 \</span><br><span class="line">  "sudo cp -rf $&#123;REMOTE_DESTS[$key]#*:&#125;/$&#123;NGINX_CONF_FILENAME&#125; /etc/nginx/sites-available/ &amp;&amp;</span><br><span class="line">  sudo rm -rf $&#123;REMOTE_DESTS[$key]#*:&#125;/$&#123;NGINX_CONF_FILENAME&#125; &amp;&amp;</span><br><span class="line">  sudo ln -sf /etc/nginx/sites-available/$&#123;NGINX_CONF_FILENAME&#125; /etc/nginx/sites-enabled/$&#123;NGINX_CONF_FILENAME&#125; &amp;&amp;</span><br><span class="line">  sudo service nginx reload"</span><br></pre></td></tr></table></figure>
<h2 id="二、查看或修改监控文件系统-Inotify-的watch数目"><a href="#二、查看或修改监控文件系统-Inotify-的watch数目" class="headerlink" title="二、查看或修改监控文件系统(Inotify)的watch数目"></a>二、查看或修改监控文件系统(Inotify)的watch数目</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 设置</span><br><span class="line">sudo sysctl fs.inotify.max_user_watches=524288</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看</span><br><span class="line">sysctl -a | grep inotify</span><br></pre></td></tr></table></figure>
<h2 id="三、查看Ubuntu操作系统位数及版本"><a href="#三、查看Ubuntu操作系统位数及版本" class="headerlink" title="三、查看Ubuntu操作系统位数及版本"></a>三、查看Ubuntu操作系统位数及版本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 查看Ubuntu操作系统位数</span><br><span class="line"><span class="meta">#</span> 方法一: getconf</span><br><span class="line">getconf LONG_BIT</span><br><span class="line"><span class="meta">#</span> 64 or 32</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 方法二: uname -a</span><br><span class="line">uname -a</span><br><span class="line"><span class="meta">#</span> Linux user-3020 3.13.0-48-generic #80-Ubuntu SMP Thu Mar 12 11:16:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux</span><br><span class="line"><span class="meta">#</span> i686表示32位, x86_64表示64位</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看Ubuntu操作系统版本</span><br><span class="line">lsb_release -a</span><br><span class="line"><span class="meta">#</span> Distributor ID:	Ubuntu</span><br><span class="line"><span class="meta">#</span> Description:	Ubuntu 14.04.2 LTS</span><br><span class="line"><span class="meta">#</span> Release:	14.04</span><br><span class="line"><span class="meta">#</span> Codename:	trusty</span><br></pre></td></tr></table></figure>
<h2 id="四、动态查看一个文件"><a href="#四、动态查看一个文件" class="headerlink" title="四、动态查看一个文件"></a>四、动态查看一个文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f filename</span><br></pre></td></tr></table></figure>
<h2 id="五、sudo操作手动输入密码"><a href="#五、sudo操作手动输入密码" class="headerlink" title="五、sudo操作手动输入密码"></a>五、sudo操作手动输入密码</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo "abc123_" | sudo -S sh -c "cp /home/user/hosts /etc/hosts"</span><br></pre></td></tr></table></figure>
<h2 id="六、替换变量中字符"><a href="#六、替换变量中字符" class="headerlink" title="六、替换变量中字符"></a>六、替换变量中字符</h2><h3 id="第一种方式"><a href="#第一种方式" class="headerlink" title="第一种方式"></a>第一种方式</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMMIT_MSG=$(COMMIT_MSG//feat/build) # 将COMMIT_MSG中所有的feat替换成build</span><br></pre></td></tr></table></figure>
<h3 id="第二种方式-sed"><a href="#第二种方式-sed" class="headerlink" title="第二种方式: sed"></a>第二种方式: sed</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMMIT_MSG=$(echo $COMMIT_MSG | sed 's/^ //g') #去除COMMIT_MSG变量中所有左边的空格</span><br></pre></td></tr></table></figure>
<h3 id="第三种方式：-tr命令"><a href="#第三种方式：-tr命令" class="headerlink" title="第三种方式： tr命令"></a>第三种方式： tr命令</h3><p><em>tr命令</em>可以对来自标准输入的字符进行替换、压缩和删除。它可以将一组字符变成另一组字符，经常用来编写优美的单行命令，作用很强大。</p>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tr(选项)(参数)</span><br></pre></td></tr></table></figure>
<h4 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h4><ul>
<li>-c或——complerment：取代所有不属于第一字符集的字符；</li>
<li>-d或——delete：删除所有属于第一字符集的字符；</li>
<li>-s或–squeeze-repeats：把连续重复的字符以单独一个字符表示；</li>
<li>-t或–truncate-set1：先删除第一字符集较第二字符集多出的字符。</li>
</ul>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><ul>
<li>字符集1：指定要转换或删除的原字符集。当执行转换操作时，必须使用参数“字符集2”指定转换的目标字符集。但执行删除操作时，不需要参数“字符集2”；</li>
</ul>
<p>*字符集2：指定要转换成的目标字符集。</p>
<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>将输入字符由大写转换为小写：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo "HELLO WORLD" | tr 'A-Z' 'a-z'</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>
<p>‘A-Z’ 和 ‘a-z’都是集合，集合是可以自己制定的，例如：’ABD-}’、’bB.,’、’a-de-h’、’a-c0-9’都属于集合，集合里可以使用’\n’、’\t’，可以可以使用其他ASCII字符。</p>
<p>更详细的<a href="http://man.linuxde.net/tr" target="_blank" rel="noopener">tr实例</a></p>
<h2 id="七、if指令详解-TODO"><a href="#七、if指令详解-TODO" class="headerlink" title="七、if指令详解(TODO)"></a>七、if指令详解(TODO)</h2><h3 id="判断文件夹是否存在"><a href="#判断文件夹是否存在" class="headerlink" title="判断文件夹是否存在"></a>判断文件夹是否存在</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 如果文件夹不存在，创建文件夹</span><br><span class="line">if [ ! -d "/myfolder" ]; then</span><br><span class="line">  mkdir /myfolder</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> shell判断文件,目录是否存在或者具有权限</span><br><span class="line"></span><br><span class="line">folder="/var/www/"</span><br><span class="line">file="/var/www/log"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> -x 参数判断 $folder 是否存在并且是否具有可执行权限</span><br><span class="line">if [ ! -x "$folder"]; then</span><br><span class="line">  mkdir "$folder"</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> -d 参数判断 $folder 是否存在</span><br><span class="line">if [ ! -d "$folder"]; then</span><br><span class="line">  mkdir "$folder"</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> -f 参数判断 $file 是否存在</span><br><span class="line">if [ ! -f "$file" ]; then</span><br><span class="line">  touch "$file"</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> -n 判断一个变量是否有值</span><br><span class="line">if [ ! -n "$var" ]; then</span><br><span class="line">  echo "$var is empty"</span><br><span class="line">  exit 0</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 判断两个变量是否相等</span><br><span class="line">if [ "$var1" = "$var2" ]; then</span><br><span class="line">  echo '$var1 eq $var2'</span><br><span class="line">else</span><br><span class="line">  echo '$var1 not eq $var2'</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h2 id="八、开始行和结束行的内容"><a href="#八、开始行和结束行的内容" class="headerlink" title="八、开始行和结束行的内容"></a>八、开始行和结束行的内容</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 文件最后100行</span><br><span class="line">tail -n 100 file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 文件开头100行</span><br><span class="line">head -n 100 file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 文件指定开始行和结束行的内容(包头不包尾)</span><br><span class="line">sed '1,100p' file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 文件有多少行</span><br><span class="line">wc -l file</span><br></pre></td></tr></table></figure>
<h2 id="九、用来从文件或者变量中提取字段-awk"><a href="#九、用来从文件或者变量中提取字段-awk" class="headerlink" title="九、用来从文件或者变量中提取字段(awk)"></a>九、用来从文件或者变量中提取字段(awk)</h2><p>awk 用来从文本文件中提取字段。缺省地，字段分割符是空格，可以使用-F指定其他分割符。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo "Adam Bor, 34, IndiaKerry Miller, 22, USA" | awk -F, '&#123;print $1 "," $3 &#125;'</span><br><span class="line"><span class="meta">#</span> Adam Bor, IndiaKerry Miller, USA</span><br></pre></td></tr></table></figure></p>
<p>这里我们使用，作为字段分割符，同时打印第一个和第三个字段</p>
<h2 id="十、输出不换行-echo"><a href="#十、输出不换行-echo" class="headerlink" title="十、输出不换行(echo)"></a>十、输出不换行(echo)</h2><p>echo的参数中, -e表示开启转义, /c表示不换行,脚本如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">#filename: 1</span><br><span class="line">echo -e &quot;please input a value:\c&quot;</span><br><span class="line">read value</span><br><span class="line"># echo &quot;what you input is:&quot; $valuel</span><br></pre></td></tr></table></figure>
<p>脚本2:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/sh</span><br><span class="line"><span class="meta">#</span>filename: 1</span><br><span class="line">echo -n "please input a value:"</span><br><span class="line">read value</span><br><span class="line">echo "what you input is:" $value</span><br></pre></td></tr></table></figure>
<h2 id="十一、字符串大小写不敏感的比较"><a href="#十一、字符串大小写不敏感的比较" class="headerlink" title="十一、字符串大小写不敏感的比较"></a>十一、字符串大小写不敏感的比较</h2><p>通用的方法是将字符串先转换成小写后再比较</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line"></span><br><span class="line">xxx="Temp"</span><br><span class="line">yyy="temp"</span><br><span class="line"></span><br><span class="line">x_tmp=$(echo $xxx | tr [A-Z] [a-z])</span><br><span class="line">y_tmp=$(echo $yyy | tr [A-Z] [a-z])</span><br><span class="line"></span><br><span class="line">if [ "$x_tmp " = "$y_tmp " ]; then</span><br><span class="line">  echo   "PASS"</span><br><span class="line">else</span><br><span class="line">  echo   "FAIL"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h2 id="十二、-amp-amp-运算符"><a href="#十二、-amp-amp-运算符" class="headerlink" title="十二、&amp;&amp; 运算符"></a>十二、<strong>&amp;&amp;</strong> 运算符</h2><p>语法格式：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1 &amp;&amp; command2 [&amp;&amp; command3 ...]</span><br></pre></td></tr></table></figure></p>
<p>&amp;&amp;左边的命令（命令1）返回真(即返回0，成功被执行）后，&amp;&amp;右边的命令（命令2）才能够被执行；换句话说，“如果这个命令执行成功&amp;&amp;那么执行这个命令”。</p>
<p>1 命令之间使用 &amp;&amp; 连接，实现逻辑与的功能。<br>2 只有在 &amp;&amp; 左边的命令返回真（命令返回值 $? == 0），&amp;&amp; 右边的命令才会被执行。<br>3 只要有一个命令返回假（命令返回值 $? == 1），后面的命令就不会被执行。</p>
<h2 id="十三、-运算符"><a href="#十三、-运算符" class="headerlink" title="十三、|| 运算符"></a>十三、<strong>||</strong> 运算符</h2><p>语法格式:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1 || command2 [|| command3 ...]</span><br></pre></td></tr></table></figure>
<p>||则与&amp;&amp;相反。如果||左边的命令（命令1）未执行成功，那么就执行||右边的命令（命令2）；或者换句话说，“如果这个命令执行失败了||那么就执行这个命令。</p>
<p>1 命令之间使用 || 连接，实现逻辑或的功能。<br>2 只有在 || 左边的命令返回假（命令返回值 $? == 1），|| 右边的命令才会被执行。这和 c 语言中的逻辑或语法功能相同，即实现短路逻辑或操作。<br>3 只要有一个命令返回真（命令返回值 $? == 0），后面的命令就不会被执行。</p>
<h2 id="十四、判断变量中是否包含某个字符串"><a href="#十四、判断变量中是否包含某个字符串" class="headerlink" title="十四、判断变量中是否包含某个字符串"></a>十四、判断变量中是否包含某个字符串</h2><p>3 只要有一个命令返回真（命令返回值 $? == 0），后面的命令就不会被执行。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str="this is a string"</span><br><span class="line">[[ $str =~ "this" ]] &amp;&amp; echo "$str contains this"</span><br><span class="line">[[ $str =~ "that" ]] || echo "$str does NOT contain that"</span><br></pre></td></tr></table></figure></p>
<p>结果为：<br>this is a string contains this<br>this is a string does NOT contains that<br>“[[“ 判断命令和 “=~”正则式匹配符号</p>
<h2 id="十五、shell中-和-的区别"><a href="#十五、shell中-和-的区别" class="headerlink" title="十五、shell中 [ ] 和 [[ ]] 的区别"></a>十五、shell中 <strong>[ ]</strong> 和 <strong>[[ ]]</strong> 的区别</h2><p><a href="http://blog.csdn.net/ysdaniel/article/details/7905818" target="_blank" rel="noopener">http://blog.csdn.net/ysdaniel/article/details/7905818</a></p>
<h2 id="十六、shell中-‘’-“”-和-的区别"><a href="#十六、shell中-‘’-“”-和-的区别" class="headerlink" title="十六、shell中 ‘’ , “” 和  的区别"></a>十六、shell中 <strong>‘’</strong> , <strong>“”</strong> 和 <strong><code></code></strong> 的区别</h2><p><a href="http://www.cnblogs.com/Skyar/p/5914942.html" target="_blank" rel="noopener">http://www.cnblogs.com/Skyar/p/5914942.html</a></p>
<h2 id="参考地址："><a href="#参考地址：" class="headerlink" title="参考地址："></a>参考地址：</h2><p><a href="http://www.cnblogs.com/xuejie/archive/2013/01/31/2886552.html" target="_blank" rel="noopener">基础语法</a><br><a href="http://man.linuxde.net/echo" target="_blank" rel="noopener">echo指令</a></p>

      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li></ul>

        <a data-url="https://hankliu62.github.io/2017/09/14/commonly-shell-command/" data-id="cltd13but0000celoq0q125ip" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
</article>



  
    <article id="post-hexo-github-blog-guide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2017/09/09/hexo-github-blog-guide/" class="article-date">
  <time datetime="2017-09-09T04:20:26.000Z" itemprop="datePublished">2017-09-09</time>
</h3>
    
  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content fill-content-true">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/09/hexo-github-blog-guide/">MAC搭建个人博客hexo+github详细完整步骤</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>自己也算是摸爬滚打搭建成功，然后自己再重新安装部署一遍，把完整步骤分享给大家，同时最后有一些连接，如果我的步骤不行，大家可以参考其他人的.</p>
<h2 id="一、安装Homebrew"><a href="#一、安装Homebrew" class="headerlink" title="一、安装Homebrew"></a>一、安装Homebrew</h2><p>Homebrew是基于Ruby的，所以安装过程也是很简单的，把下面的代码粘贴到Terminal中执行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure>
<p>查看安装是否成功:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew --version</span><br></pre></td></tr></table></figure>
<p>如下图所示表示安装成功</p>
<p><img src="https://user-images.githubusercontent.com/8088864/30236069-ba7e712e-9544-11e7-910a-7ec04c1d5579.png" alt="image"></p>
<p>更多的brew命令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">//查看brew的帮助</span><br><span class="line">brew –<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">//安装软件</span><br><span class="line">brew install git</span><br><span class="line"></span><br><span class="line">//卸载软件</span><br><span class="line">brew uninstall git</span><br><span class="line"></span><br><span class="line">//搜索软件</span><br><span class="line">brew search git</span><br><span class="line"></span><br><span class="line">//显示已经安装软件列表</span><br><span class="line">brew list</span><br><span class="line"></span><br><span class="line">//更新软件，把所有的Formula目录更新，并且会对本机已经安装并有更新的软件用*标明。</span><br><span class="line">brew update</span><br><span class="line"></span><br><span class="line">//更新某具体软件</span><br><span class="line">brew upgrade git</span><br><span class="line"></span><br><span class="line">//查看软件信息</span><br><span class="line">brew [info | home] [FORMULA...]</span><br><span class="line"></span><br><span class="line">//删除程序，和upgrade一样，单个软件删除和所有程序老版删除。</span><br><span class="line">brew cleanup git</span><br><span class="line">brew cleanup</span><br><span class="line"></span><br><span class="line">//查看那些已安装的程序需要更新</span><br><span class="line">brew outdated</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//其它Homebrew指令:</span><br><span class="line">brew list   //—列出已安装的软件</span><br><span class="line"></span><br><span class="line">brew update   //—更新Homebrew</span><br><span class="line"></span><br><span class="line">brew home *   //—用浏览器打开</span><br><span class="line"></span><br><span class="line">brew info *   //—显示软件内容信息</span><br><span class="line"></span><br><span class="line">brew deps *    //—显示包依赖</span><br><span class="line"></span><br><span class="line">brew server *  //—启动web服务器，可以通过浏览器访问</span><br><span class="line">                 //http://localhost:4567/ 来同网页来管理包</span><br><span class="line"></span><br><span class="line">brew -h brew   //—帮助</span><br></pre></td></tr></table></figure>
<h2 id="二、安装Git"><a href="#二、安装Git" class="headerlink" title="二、安装Git"></a>二、安装Git</h2><h3 id="1、使用brew安装Git"><a href="#1、使用brew安装Git" class="headerlink" title="1、使用brew安装Git"></a>1、使用brew安装Git</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install git</span><br></pre></td></tr></table></figure>
<h3 id="2、完成安装"><a href="#2、完成安装" class="headerlink" title="2、完成安装"></a>2、完成安装</h3><p>查看是否安装成功</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/8088864/30236377-b5343392-954a-11e7-9566-927e43ec4983.png" alt="Git安装成功"></p>
<h2 id="三、通过nvm安装指定版本的node"><a href="#三、通过nvm安装指定版本的node" class="headerlink" title="三、通过nvm安装指定版本的node"></a>三、通过nvm安装指定版本的node</h2><h3 id="1、安装nvm"><a href="#1、安装nvm" class="headerlink" title="1、安装nvm"></a>1、安装nvm</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nvm</span><br></pre></td></tr></table></figure>
<h3 id="2、配置nvm"><a href="#2、配置nvm" class="headerlink" title="2、配置nvm"></a>2、配置nvm</h3><p>配置nvm在shell中可以使用nvm命令，修改<code>~/.bash_profile</code>文件，如果不存在，新建<code>.bash_profile</code>文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">vim .bash_profile</span><br></pre></td></tr></table></figure>
<p>在文件中添加如下命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export NVM_DIR=~/.nvm</span><br><span class="line">source $(brew --prefix nvm)/nvm.sh</span><br></pre></td></tr></table></figure>
<p>重新source</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> .bash_profile</span><br></pre></td></tr></table></figure>
<h3 id="3、安装node"><a href="#3、安装node" class="headerlink" title="3、安装node"></a>3、安装node</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nvm ls-remote 查看 所有的node可用版本</span><br><span class="line"></span><br><span class="line">nvm install xxx 下载你想要的版本</span><br><span class="line"></span><br><span class="line">nvm use xxx 使用指定版本的node</span><br><span class="line"></span><br><span class="line">nvm <span class="built_in">alias</span> default xxx 每次启动终端都使用该版本的node</span><br></pre></td></tr></table></figure>
<h3 id="4、完成安装"><a href="#4、完成安装" class="headerlink" title="4、完成安装"></a>4、完成安装</h3><p>查看是否安装成功</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/8088864/30236355-4d1f8f18-954a-11e7-8da7-54d3f9ae1c91.png" alt="Node安装成功"></p>
<h2 id="四、安装hexo"><a href="#四、安装hexo" class="headerlink" title="四、安装hexo"></a>四、安装hexo</h2><h3 id="1、利用npm命令即可安装"><a href="#1、利用npm命令即可安装" class="headerlink" title="1、利用npm命令即可安装"></a>1、利用npm命令即可安装</h3><p>全局安装</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo</span><br></pre></td></tr></table></figure>
<h2 id="五、初始化Hexo"><a href="#五、初始化Hexo" class="headerlink" title="五、初始化Hexo"></a>五、初始化Hexo</h2><h3 id="1、创建Blog所在的文件夹"><a href="#1、创建Blog所在的文件夹" class="headerlink" title="1、创建Blog所在的文件夹"></a>1、创建Blog所在的文件夹</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /Users/**/Workspace/github</span><br><span class="line">mdkir hankliu62.github.com</span><br></pre></td></tr></table></figure>
<h3 id="2、hexo初始化"><a href="#2、hexo初始化" class="headerlink" title="2、hexo初始化"></a>2、hexo初始化</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>
<p>初始化成功后会生成如下文件</p>
<p><img src="https://user-images.githubusercontent.com/8088864/30236442-e26003fe-954b-11e7-9313-89dca90d1984.png" alt="Hexo初始化成功"></p>
<h3 id="3、在-config-yml进行基础配置"><a href="#3、在-config-yml进行基础配置" class="headerlink" title="3、在_config.yml进行基础配置"></a>3、在_config.yml进行基础配置</h3><p>配置<em>title</em>, <em>author</em>, <em>description</em>等基本信息</p>
<p><img src="https://user-images.githubusercontent.com/8088864/30236472-81f5d998-954c-11e7-9512-4e9fa6aa14fe.png" alt="基础配置"></p>
<h3 id="4、设置主题"><a href="#4、设置主题" class="headerlink" title="4、设置主题"></a>4、设置主题</h3><p>可以<a href="https://hexo.io/themes/" target="_blank" rel="noopener">Hexo主题</a>页面中选择与自己相匹配的主题，使用Git clone到themes目录下，配置成自己博客的主题, 这些主题都是安装作者的喜好来开发的，我们可以Fork这个project，根据自己的喜好来进行二次开发和设置</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> themes</span><br><span class="line"></span><br><span class="line">https://github.com/hankliu62/hexo-theme-paperbox.git</span><br></pre></td></tr></table></figure>
<h3 id="5、添加博客文章"><a href="#5、添加博客文章" class="headerlink" title="5、添加博客文章"></a>5、添加博客文章</h3><p>源文件一般为markdown文件，所以在写博客之前我们需要先了解<a href="http://www.appinn.com/markdown/" target="_blank" rel="noopener">markdown的基本语法</a>, 将完成的文章放到<code>source/_posts</code>路径下。</p>
<p><img src="https://user-images.githubusercontent.com/8088864/30236636-63a2de56-9550-11e7-9ff4-3efba9c58b14.png" alt="文章"></p>
<h3 id="6、启动本地服务，浏览本地博客"><a href="#6、启动本地服务，浏览本地博客" class="headerlink" title="6、启动本地服务，浏览本地博客"></a>6、启动本地服务，浏览本地博客</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line"></span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p>更多<a href="https://segmentfault.com/a/1190000002632530" target="_blank" rel="noopener">hexo命令</a><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动服务</span></span><br><span class="line">hexo server <span class="comment"># Hexo 会监视文件变动并自动更新，您无须重启服务器。</span></span><br><span class="line">hexo s <span class="comment"># 简写</span></span><br><span class="line">hexo server</span><br><span class="line">hexo server -s <span class="comment"># 静态模式</span></span><br><span class="line">hexo server -p 5000 <span class="comment"># 更改端口</span></span><br><span class="line">hexo server -i 192.168.1.1 <span class="comment"># 自定义 IP</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># INFO Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#清除缓存</span></span><br><span class="line">hexo clean <span class="comment">#网页正常情况下可以忽略此条命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># INFO  Deleted database.</span></span><br><span class="line"><span class="comment"># INFO  Deleted public folder.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建文件夹（自动在文件夹下新建index.md）</span></span><br><span class="line">hexo new page <span class="string">"file"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># INFO Created: D:...\blog\source\file\index.md</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建文章</span></span><br><span class="line">hexo n fileName</span><br><span class="line">hexo new <span class="string">"fileName"</span></span><br><span class="line">hexo new post fileName</span><br><span class="line">hexo new post <span class="string">"fileName"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># INFO Created: D:...\blog\source\_posts\fileName.md</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成/编译/发布(生成静态网页)</span></span><br><span class="line">hexo generate</span><br><span class="line">hexo g</span><br><span class="line">hexo generate --watch <span class="comment"># 监视文件变动</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># INFO Files loaded in 2.03 s</span></span><br><span class="line"><span class="comment"># INFO Deleted: ......</span></span><br><span class="line"><span class="comment"># INFO Generated: ......</span></span><br><span class="line"><span class="comment"># INFO 108 files generatd in 8.44 s</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 部署</span></span><br><span class="line">hexo deploy</span><br><span class="line">hexo d</span><br><span class="line"></span><br><span class="line"><span class="comment"># INFO  Deploying: git</span></span><br><span class="line"><span class="comment"># INFO  Clearing .deploy_git folder...</span></span><br><span class="line"><span class="comment"># INFO  Copying files from public folder...</span></span><br><span class="line"><span class="comment"># INFO  Copying files from extend dirs...</span></span><br><span class="line"><span class="comment"># [master 29d5f2d] feat(blog): add old blogs</span></span><br><span class="line"><span class="comment">#  7 files changed, 10 insertions(+), 9 deletions(-)</span></span><br><span class="line"><span class="comment"># To https://github.com/hankliu62/hankliu62.github.com.git</span></span><br><span class="line"><span class="comment">#    8a51b69..29d5f2d  HEAD -&gt; master</span></span><br><span class="line"><span class="comment"># Branch master set up to track remote branch master from https://github.com/hankliu62/hankliu62.github.com.git.</span></span><br><span class="line"><span class="comment"># INFO  Deploy done: git</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 完成后部署(两个命令的作用是相同的)</span></span><br><span class="line">hexo generate --deploy</span><br><span class="line">hexo deploy --generate</span><br><span class="line">hexo deploy -g</span><br><span class="line">hexo server -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># INFO  Start processing</span></span><br><span class="line"><span class="comment"># INFO  Files loaded in 148 ms</span></span><br><span class="line"><span class="comment"># INFO  Generated: 2015/12/24/ubuntu-netstat/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: archives/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: archives/2015/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: archives/2017/09/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: tags/javascript/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: tags/Javascript/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: archives/2017/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: tags/ubuntu/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: tags/PID/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: 2017/09/09/hexo-github-blog-guide/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: 2015/12/24/javascript-common-function/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: tags/模块化/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: archives/2015/12/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: 2015/12/24/javascript-module/index.html</span></span><br><span class="line"><span class="comment"># INFO  Generated: index.html</span></span><br><span class="line"><span class="comment"># INFO  15 files generated in 240 ms</span></span><br><span class="line"><span class="comment"># INFO  Deploying: git</span></span><br><span class="line"><span class="comment"># INFO  Clearing .deploy_git folder...</span></span><br><span class="line"><span class="comment"># INFO  Copying files from public folder...</span></span><br><span class="line"><span class="comment"># INFO  Copying files from extend dirs...</span></span><br><span class="line"><span class="comment"># [master 29d5f2d] feat(blog): add old blogs</span></span><br><span class="line"><span class="comment">#  7 files changed, 10 insertions(+), 9 deletions(-)</span></span><br><span class="line"><span class="comment"># To https://github.com/hankliu62/hankliu62.github.com.git</span></span><br><span class="line"><span class="comment">#    8a51b69..29d5f2d  HEAD -&gt; master</span></span><br><span class="line"><span class="comment"># Branch master set up to track remote branch master from https://github.com/hankliu62/hankliu62.github.com.git.</span></span><br><span class="line"><span class="comment"># INFO  Deploy done: git</span></span><br></pre></td></tr></table></figure></p>
<h3 id="7、浏览器输入http-localhost-4000进行访问"><a href="#7、浏览器输入http-localhost-4000进行访问" class="headerlink" title="7、浏览器输入http://localhost:4000进行访问"></a>7、浏览器输入<code>http://localhost:4000</code>进行访问</h3><p><img src="https://user-images.githubusercontent.com/8088864/30236643-a79dff46-9550-11e7-888e-2dbfe2cf3773.png" alt="博客"></p>
<h2 id="六、部署到Github"><a href="#六、部署到Github" class="headerlink" title="六、部署到Github"></a>六、部署到Github</h2><h3 id="1、申请Github账号"><a href="#1、申请Github账号" class="headerlink" title="1、申请Github账号"></a>1、申请Github账号</h3><h3 id="2、New-repository"><a href="#2、New-repository" class="headerlink" title="2、New repository"></a>2、New repository</h3><p><img src="https://user-images.githubusercontent.com/8088864/30236675-5734e9ec-9551-11e7-8ecc-e38b4e0d98e8.png" alt="New repository"></p>
<p>注意: 输入<code>Repository name</code>时，最好与前面的<code>username</code>保持一致(上图不一致是因为我已经使用<code>hankliu62.github.com</code>创建了一个github仓库了)</p>
<h3 id="3、选择hankliu62-hankliu62-github-com-gt-gt-Settings-gt-gt-GitHub-Pages-gt-gt-Choose-a-theme"><a href="#3、选择hankliu62-hankliu62-github-com-gt-gt-Settings-gt-gt-GitHub-Pages-gt-gt-Choose-a-theme" class="headerlink" title="3、选择hankliu62/hankliu62.github.com &gt;&gt; Settings &gt;&gt; GitHub Pages &gt;&gt; Choose a theme"></a>3、选择<code>hankliu62/hankliu62.github.com</code> &gt;&gt; <code>Settings</code> &gt;&gt; <code>GitHub Pages</code> &gt;&gt; <code>Choose a theme</code></h3><p><img src="https://user-images.githubusercontent.com/8088864/30236715-7a372e04-9552-11e7-8bb7-48a5d8722059.png" alt="选择主题"></p>
<p><img src="https://user-images.githubusercontent.com/8088864/30236720-9eed71d6-9552-11e7-9187-c3fac4052b28.png" alt="选择主题"></p>
<p><img src="https://user-images.githubusercontent.com/8088864/30236724-aedbb9d6-9552-11e7-9a8c-2398388b9321.png" alt="选择主题"></p>
<p>随便选择一个主题，最终会使用hexo中选择的主题样式，这里就无所谓了</p>
<h3 id="4、设置index-md-访问github博客"><a href="#4、设置index-md-访问github博客" class="headerlink" title="4、设置index.md, 访问github博客"></a>4、设置index.md, 访问github博客</h3><p><img src="https://user-images.githubusercontent.com/8088864/30236738-37332f94-9553-11e7-8714-e47de3fdecd6.png" alt="设置index.md"></p>
<h3 id="5、结合hexo，发布到github"><a href="#5、结合hexo，发布到github" class="headerlink" title="5、结合hexo，发布到github"></a>5、结合hexo，发布到github</h3><p>进入第三步创建的<code>hankliu62.github.com</code>文件夹，在<code>_config.yml</code>配置对于的github仓库, 以及本次提交的信息<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> hankliu62.github.com</span><br><span class="line"></span><br><span class="line">vim _config.yml</span><br></pre></td></tr></table></figure></p>
<p>配置信息和提交信息如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  message: &quot;feat(blog): add hexo-github-blog-guide article&quot;</span><br><span class="line">  branch: master</span><br><span class="line">  repo: https://github.com/hankliu62/hankliu62.github.com.git</span><br></pre></td></tr></table></figure>
<p>生成静态文件，再部署</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/8088864/30236778-97f84e1c-9554-11e7-9b34-20cb95a9cc77.png" alt="生成静态文件部署"></p>
<h2 id="七、浏览器中输入https-hankliu62-github-io-进行查看"><a href="#七、浏览器中输入https-hankliu62-github-io-进行查看" class="headerlink" title="七、浏览器中输入https://hankliu62.github.io/进行查看"></a>七、浏览器中输入<code>https://hankliu62.github.io/</code>进行查看</h2>
      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

        <a data-url="https://hankliu62.github.io/2017/09/09/hexo-github-blog-guide/" data-id="cltd13bv50005celo0psjb0n1" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
</article>



  
    <article id="post-javascript-common-function" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2015/12/24/javascript-common-function/" class="article-date">
  <time datetime="2015-12-24T11:18:13.000Z" itemprop="datePublished">2015-12-24</time>
</h3>
    
  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content fill-content-true">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/24/javascript-common-function/">Javascript语法糖</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="1-Array-prototype-slice"><a href="#1-Array-prototype-slice" class="headerlink" title="1.Array.prototype.slice"></a>1.Array.prototype.slice</h2><p>数组的slice()方法通常用来从一个数组中抽取片断。但很多开发者不了解的是，这个方法还可以用来将“类数组”元素（比如 arguments、参数列表、节点列表和属性列表）转换成真正的数组：（译注：DOM 元素的属性列表通过 attributes属性获取), Array.prototype.slice.call(arguments)能将具有length属性的对象转成数组.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=&#123;<span class="attr">length</span>:<span class="number">2</span>,<span class="number">0</span>:<span class="string">'first'</span>,<span class="number">1</span>:<span class="string">'second'</span>&#125;;</span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.call(a);<span class="comment">//  ["first", "second"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a=&#123;<span class="attr">length</span>:<span class="number">2</span>&#125;;</span><br><span class="line"><span class="built_in">Array</span>.prototype.slice.call(a);<span class="comment">//  [undefined, undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> argsArr = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br></pre></td></tr></table></figure>
<h2 id="2-使用push来合并数组"><a href="#2-使用push来合并数组" class="headerlink" title="2.使用push来合并数组"></a>2.使用push来合并数组</h2><p>我们知道当我们想要合并两个数组时一般使用Array的concat()方法来试试，concat方法能够将两个及两个以上的数组合并成一个数组，同时我们也可以使用Array prototype 的push方法来实现两个数组的合并.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">'hank'</span>, <span class="string">'mark'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = [<span class="string">'hulk'</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(a, b)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// ['hank', 'mark', 'hulk']</span></span><br></pre></td></tr></table></figure>
<h2 id="3-Js数据去掉小数点后边的0"><a href="#3-Js数据去掉小数点后边的0" class="headerlink" title="3.Js数据去掉小数点后边的0"></a>3.Js数据去掉小数点后边的0</h2><p>在一起，我一般是使用正则表达式来替换，先判断小数点后面有无0和0的位置，然后在使用正则来替换这些0。今天突然发现一个很神奇的方法: parseFloat()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1.0</span>;</span><br><span class="line">a = <span class="built_in">parseFloat</span>(a) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>是不是特别简单?</p>
<h2 id="4-JS浮点数运算精度"><a href="#4-JS浮点数运算精度" class="headerlink" title="4.JS浮点数运算精度"></a>4.JS浮点数运算精度</h2><p>在Javascript中两个浮点数进行运算是得到的结果可能不是我们想要的结果，比如:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a, b;</span><br><span class="line">a = <span class="number">0.2</span>;</span><br><span class="line">b = <span class="number">0.1</span>;</span><br><span class="line"></span><br><span class="line">c = a + b <span class="comment">// 0.30000000000000004, 不是我们想要的0.3</span></span><br></pre></td></tr></table></figure>
<p>主要是因为计算机是二进制浮点运算，而我们输入的是十进制浮点数，十进制数转化为二进制运算过后再转化回来，在转化过程中可能会有损失.</p>
<p>解决办法，先装换成整数，运算过后，再装换回来:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> T_NUMBER = <span class="string">'number'</span>;</span><br><span class="line"><span class="comment">// 两数相减，其他运算同理</span></span><br><span class="line">customSubtract = <span class="function"><span class="keyword">function</span>(<span class="params">minuend, subtrahend</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> maxDecimalDigits, minuendDecimalDigits, minuendStr, result, subtrahendDecimalDigits, subtrahendStr;</span><br><span class="line">    minuendStr = <span class="keyword">typeof</span> minuend === T_NUMBER ? minuend + <span class="string">''</span> : minuend;</span><br><span class="line">    subtrahendStr = <span class="keyword">typeof</span> subtrahend === T_NUMBER ? subtrahend + <span class="string">''</span> : subtrahend;</span><br><span class="line">    minuendDecimalDigits = minuendStr.indexOf(<span class="string">'.'</span>) === <span class="number">-1</span> ? <span class="number">0</span> : minuendStr.length - minuendStr.indexOf(<span class="string">'.'</span>) - <span class="number">1</span>;</span><br><span class="line">    subtrahendDecimalDigits = subtrahendStr.indexOf(<span class="string">'.'</span>) === <span class="number">-1</span> ? <span class="number">0</span> : subtrahendStr.length - subtrahendStr.indexOf(<span class="string">'.'</span>) - <span class="number">1</span>;</span><br><span class="line">    maxDecimalDigits = <span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="built_in">Math</span>.max(minuendDecimalDigits, subtrahendDecimalDigits));</span><br><span class="line">    result = (minuend * maxDecimalDigits - subtrahend * maxDecimalDigits) / maxDecimalDigits;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="5-Is-object-empty"><a href="#5-Is-object-empty" class="headerlink" title="5. Is object empty?"></a>5. Is object empty?</h2><p>Check an object is empty or not?</p>
<p>Jquery has a function to check the object: <strong> jQuery.isEmptyObject </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if ($.isEmptyObject(obj)) &#123;</span><br><span class="line">  // do something</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>It’s easy and cross-browser function.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isEmptyObject = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// not empty</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// empty</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

        <a data-url="https://hankliu62.github.io/2015/12/24/javascript-common-function/" data-id="cltd13bv80008celo0wyizgtl" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
</article>



  
    <article id="post-javascript-module" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2015/12/24/javascript-module/" class="article-date">
  <time datetime="2015-12-24T10:55:37.000Z" itemprop="datePublished">2015-12-24</time>
</h3>
    
  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content fill-content-true">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/24/javascript-module/">菜鸟学习Javascript模块化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="一、模块化的定义"><a href="#一、模块化的定义" class="headerlink" title="一、模块化的定义"></a>一、模块化的定义</h2><p>模块化是一种处理复杂系统分解为更好的可管理模块的方式。它可以通过在不同组件设定不同的功能，把一个问题分解成多个小的独立、互相作用的组件，来处理复杂、大型的软件。简单点来讲就是以功能为单位，然后通过不同功能的组合来实现一个系统，模块化的主要的目的就是为了减少依赖，减少耦合，提交代码的复用性，最终提交开发的效率。为了这个目的，所以我们必须将耦合密度的功能定义在一个模块中，并且在每个模块中第一一些入口和出口，以方便模块的组合和交互。</p>
<h2 id="二、Javascript的模块化"><a href="#二、Javascript的模块化" class="headerlink" title="二、Javascript的模块化"></a>二、Javascript的模块化</h2><p>随着网站逐渐变成”互联网应用程序”，嵌入网页的Javascript代码越来越庞大，越来越复杂。Javascript模块化编程，已经成为一个迫切的需求。理想情况下，开发者只需要实现核心的业务逻辑，其他都可以加载别人已经写好的模块。</p>
<h2 id="三、Javascript模块化的发展"><a href="#三、Javascript模块化的发展" class="headerlink" title="三、Javascript模块化的发展"></a>三、Javascript模块化的发展</h2><h3 id="1、原始写法"><a href="#1、原始写法" class="headerlink" title="1、原始写法"></a>1、原始写法</h3><p>模块就是实现特定功能的一组方法。,不同的函数（以及记录状态的变量）简单地放在一起，就算是一个模块。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">m1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　<span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">m2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　<span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>缺点：”污染”了全局变量，无法保证不与其他模块发生变量名冲突，而且模块成员之间看不出直接关系。</p>
<h3 id="2、对象写法"><a href="#2、对象写法" class="headerlink" title="2、对象写法"></a>2、对象写法</h3><p>为了解决上面的缺点，可以把模块写成一个对象，所有的模块成员都放到这个对象里面。使用的时候，就是调用这个对象的属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> module1 = <span class="keyword">new</span> <span class="built_in">Object</span>(&#123;</span><br><span class="line">　　_count : <span class="number">0</span>,</span><br><span class="line">　　m1 : <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">　　　 <span class="comment">//...</span></span><br><span class="line">　　&#125;,</span><br><span class="line">　　m2 : <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">　　　　<span class="comment">//...</span></span><br><span class="line">　　&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>缺点：写法会暴露所有模块成员，内部状态可以被外部改写</p>
<h3 id="3、立即执行函数写法"><a href="#3、立即执行函数写法" class="headerlink" title="3、立即执行函数写法"></a>3、立即执行函数写法</h3><p>使用”立即执行函数”，可以达到不暴露私有成员的目的。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> module1 = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　<span class="keyword">var</span> _count = <span class="number">0</span>;</span><br><span class="line">　　<span class="keyword">var</span> m1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　　　<span class="comment">//...</span></span><br><span class="line">　　&#125;;</span><br><span class="line">　　<span class="keyword">var</span> m2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　　　<span class="comment">//...</span></span><br><span class="line">　　&#125;;</span><br><span class="line">　　<span class="keyword">return</span> &#123;</span><br><span class="line">　　　　m1 : m1,</span><br><span class="line">　　　　m2 : m2</span><br><span class="line">　　&#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>
<p>module1就是Javascript模块的基本写法。下面，再对这种写法进行加工。</p>
<h3 id="4、放大模式"><a href="#4、放大模式" class="headerlink" title="4、放大模式"></a>4、放大模式</h3><p>如果一个模块很大，必须分成几个部分，或者一个模块需要继承另一个模块，这时就有必要采用”放大模式”。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> module1 = (<span class="function"><span class="keyword">function</span> (<span class="params">mod</span>)</span>&#123;</span><br><span class="line">　　mod.m3 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">　　　　<span class="comment">//...</span></span><br><span class="line">　　&#125;;</span><br><span class="line">　　<span class="keyword">return</span> mod;</span><br><span class="line">&#125;)(module1);</span><br></pre></td></tr></table></figure></p>
<p>上面的代码为module1模块添加了一个新方法m3()，然后返回新的module1模块。</p>
<h3 id="5、宽放大模式"><a href="#5、宽放大模式" class="headerlink" title="5、宽放大模式"></a>5、宽放大模式</h3><p>在浏览器环境中，模块的各个部分通常都是从网上获取的，有时无法知道哪个部分会先加载。如果采用上一节的写法，第一个执行的部分有可能加载一个不存在空对象，这时就要采用”宽放大模式”。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> module1 = ( <span class="function"><span class="keyword">function</span> (<span class="params">mod</span>)</span>&#123;</span><br><span class="line">　　<span class="comment">//...</span></span><br><span class="line">　　<span class="keyword">return</span> mod;</span><br><span class="line">&#125;)(<span class="built_in">window</span>.module1 || &#123;&#125;);</span><br></pre></td></tr></table></figure></p>
<p>与”放大模式”相比，＂宽放大模式＂就是”立即执行函数”的参数可以是空对象。</p>
<h3 id="6、输入全局变量"><a href="#6、输入全局变量" class="headerlink" title="6、输入全局变量"></a>6、输入全局变量</h3><p>独立性是模块的重要特点，模块内部最好不与程序的其他部分直接交互。<br>为了在模块内部调用全局变量，必须显式地将其他变量输入模块。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> module1 = (<span class="function"><span class="keyword">function</span> (<span class="params">$, YAHOO</span>) </span>&#123;</span><br><span class="line">　　<span class="comment">//...</span></span><br><span class="line">&#125;)(jQuery, YAHOO);</span><br></pre></td></tr></table></figure>
<p>上面的module1模块需要使用jQuery库和YUI库，就把这两个库（其实是两个模块）当作参数输入module1。这样做除了保证模块的独立性，还使得模块之间的依赖关系变得明显。</p>
<h2 id="四、模块的规范"><a href="#四、模块的规范" class="headerlink" title="四、模块的规范"></a>四、模块的规范</h2><p>先想一想，为什么模块很重要？<br>因为有了模块，我们就可以更方便地使用别人的代码，想要什么功能，就加载什么模块。<br>但是，这样做有一个前提，那就是大家必须以同样的方式编写模块，否则你有你的写法，我有我的写法，岂不是乱了套！考虑到Javascript模块现在还没有官方规范，这一点就更重要了。<br>目前，通行的Javascript模块规范共有两种：CommonJS和AMD。我主要介绍AMD，但是要先从CommonJS讲起。</p>
<h3 id="1、CommonJS"><a href="#1、CommonJS" class="headerlink" title="1、CommonJS"></a>1、CommonJS</h3><p>2009年，美国程序员Ryan Dahl创造了node.js项目，将javascript语言用于服务器端编程。</p>
<p>这标志”Javascript模块化编程”正式诞生。因为老实说，在浏览器环境下，没有模块也不是特别大的问题，毕竟网页程序的复杂性有限；但是在服务器端，一定要有模块，与操作系统和其他应用程序互动，否则根本没法编程。<br>node.js的模块系统，就是参照CommonJS规范实现的。在CommonJS中，有一个全局性方法require()，用于加载模块。假定有一个数学模块math.js，就可以像下面这样加载。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">'math'</span>);</span><br></pre></td></tr></table></figure></p>
<p>然后，就可以调用模块提供的方法：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">'math'</span>);</span><br><span class="line">math.add(<span class="number">2</span>,<span class="number">3</span>); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure></p>
<h3 id="2、浏览器环境"><a href="#2、浏览器环境" class="headerlink" title="2、浏览器环境"></a>2、浏览器环境</h3><p>有了服务器端模块以后，很自然地，大家就想要客户端模块。而且最好两者能够兼容，一个模块不用修改，在服务器和浏览器都可以运行。<br>但是，由于一个重大的局限，使得CommonJS规范不适用于浏览器环境。还是上一节的代码，如果在浏览器中运行，会有一个很大的问题，你能看出来吗？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> math = <span class="built_in">require</span>(<span class="string">'math'</span>);</span><br><span class="line">math.add(<span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>第二行math.add(2, 3)，在第一行require(‘math’)之后运行，因此必须等math.js加载完成。也就是说，如果加载时间很长，整个应用就会停在那里等。<br>这对服务器端不是一个问题，因为所有的模块都存放在本地硬盘，可以同步加载完成，等待时间就是硬盘的读取时间。但是，对于浏览器，这却是一个大问题，因为模块都放在服务器端，等待时间取决于网速的快慢，可能要等很长时间，浏览器处于”假死”状态。<br>因此，浏览器端的模块，不能采用”同步加载”（synchronous），只能采用”异步加载”（asynchronous）。这就是AMD规范诞生的背景。</p>
<h3 id="3、AMD"><a href="#3、AMD" class="headerlink" title="3、AMD"></a>3、AMD</h3><p>AMD是”Asynchronous Module Definition”的缩写，意思就是”异步模块定义”。它采用异步方式加载模块，模块的加载不影响它后面语句的运行。所有依赖这个模块的语句，都定义在一个回调函数中，等到加载完成之后，这个回调函数才会运行。<br>AMD也采用require()语句加载模块，但是不同于CommonJS，它要求两个参数：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="built_in">module</span>], callback);</span><br></pre></td></tr></table></figure></p>
<p>第一个参数[module]，是一个数组，里面的成员就是要加载的模块；第二个参数callback，则是加载成功之后的回调函数。如果将前面的代码改写成AMD形式，就是下面这样：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">'math'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">math</span>) </span>&#123;</span><br><span class="line">　　math.add(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>math.add()与math模块加载不是同步的，浏览器不会发生假死。所以很显然，AMD比较适合浏览器环境。<br>目前，主要有两个Javascript库实现了AMD规范：require.js和curl.js。</p>
<h2 id="五、require-js"><a href="#五、require-js" class="headerlink" title="五、require.js"></a>五、require.js</h2><h3 id="1、为什么要用require-js"><a href="#1、为什么要用require-js" class="headerlink" title="1、为什么要用require.js"></a>1、为什么要用require.js</h3><p>最早的时候，所有Javascript代码都写在一个文件里面，只要加载这一个文件就够了。后来，代码越来越多，一个文件不够了，必须分成多个文件，依次加载。下面的网页代码，相信很多人都见过。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"1.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="2.js"&gt;&lt;/</span>script&gt;</span><br><span class="line">&lt;script src=<span class="string">"3.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="4.js"&gt;&lt;/</span>script&gt;</span><br><span class="line">&lt;script src=<span class="string">"5.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="6.js"&gt;&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure>
<p>这段代码依次加载多个js文件。<br>这样的写法有很大的缺点。首先，加载的时候，浏览器会停止网页渲染，加载文件越多，网页失去响应的时间就会越长；其次，由于js文件之间存在依赖关系，因此必须严格保证加载顺序（比如上例的1.js要在2.js的前面），依赖性最大的模块一定要放到最后加载，当依赖关系很复杂的时候，代码的编写和维护都会变得困难。<br>require.js的诞生，就是为了解决这两个问题：</p>
<ul>
<li>实现js文件的异步加载，避免网页失去响应</li>
<li>管理模块之间的依赖性，便于代码的编写和维护</li>
</ul>
<h3 id="2、require-js的加载"><a href="#2、require-js的加载" class="headerlink" title="2、require.js的加载"></a>2、require.js的加载</h3><p>使用require.js的第一步，是先去官方网站下载最新版本。<br>下载后，假定把它放在js子目录下面，就可以加载了。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"js/require.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>加载这个文件，也可能造成网页失去响应。解决办法有两个，一个是把它放在网页底部加载，另一个是写成下面这样：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"js/require.js"</span> defer <span class="keyword">async</span>=<span class="string">"true"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>async属性表明这个文件需要异步加载，避免网页失去响应。IE不支持这个属性，只支持defer，所以把defer也写上。<br>加载require.js以后，下一步就要加载我们自己的代码了。假定我们自己的代码文件是main.js，也放在js目录下面。那么，只需要写成下面这样就行了：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"js/require.js"</span> data-main=<span class="string">"js/main"</span> defer <span class="keyword">async</span>=<span class="string">"true"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>data-main属性的作用是，指定网页程序的主模块。在上例中，就是js目录下面的main.js，这个文件会第一个被require.js加载。由于require.js默认的文件后缀名是js，所以可以把main.js简写成main。</p>
<h3 id="3、主模块的写法"><a href="#3、主模块的写法" class="headerlink" title="3、主模块的写法"></a>3、主模块的写法</h3><p>上一节的main.js，我把它称为”主模块”，意思是整个网页的入口代码。它有点像C语言的main()函数，所有代码都从这儿开始运行。<br>下面就来看，怎么写main.js。<br>如果我们的代码不依赖任何其他模块，那么可以直接写入javascript代码。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">alert(<span class="string">"加载成功！"</span>);</span><br></pre></td></tr></table></figure></p>
<p>但这样的话，就没必要使用require.js了。真正常见的情况是，主模块依赖于其他模块，这时就要使用AMD规范定义的的require()函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'moduleA'</span>, <span class="string">'moduleB'</span>, <span class="string">'moduleC'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">moduleA, moduleB, moduleC</span>)</span>&#123;</span><br><span class="line">　　<span class="comment">// some code here</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>require()函数接受两个参数。第一个参数是一个数组，表示所依赖的模块，上例就是[‘moduleA’, ‘moduleB’, ‘moduleC’]，即主模块依赖这三个模块；第二个参数是一个回调函数，当前面指定的模块都加载成功后，它将被调用。加载的模块会以参数形式传入该函数，从而在回调函数内部就可以使用这些模块。<br>require()异步加载moduleA，moduleB和moduleC，浏览器不会失去响应；它指定的回调函数，只有前面的模块都加载成功后，才会运行，解决了依赖性的问题。<br>下面，我们看一个实际的例子。<br>假定主模块依赖jquery、underscore和backbone这三个模块，main.js就可以这样写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">'jquery'</span>, <span class="string">'underscore'</span>, <span class="string">'backbone'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">$, _, Backbone</span>)</span>&#123;</span><br><span class="line">　　<span class="comment">// some code here</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>require.js会先加载jQuery、underscore和backbone，然后再运行回调函数。主模块的代码就写在回调函数中。</p>
<h3 id="4、模块的加载"><a href="#4、模块的加载" class="headerlink" title="4、模块的加载"></a>4、模块的加载</h3><p>上一节最后的示例中，主模块的依赖模块是[‘jquery’, ‘underscore’, ‘backbone’]。默认情况下，require.js假定这三个模块与main.js在同一个目录，文件名分别为jquery.js，underscore.js和backbone.js，然后自动加载。<br>使用require.config()方法，我们可以对模块的加载行为进行自定义。require.config()就写在主模块（main.js）的头部。参数就是一个对象，这个对象的paths属性指定各个模块的加载路径。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">　 paths: &#123;</span><br><span class="line">　　　　<span class="string">"jquery"</span>: <span class="string">"jquery.min"</span>,</span><br><span class="line">　　　　<span class="string">"underscore"</span>: <span class="string">"underscore.min"</span>,</span><br><span class="line">　　　　<span class="string">"backbone"</span>: <span class="string">"backbone.min"</span></span><br><span class="line">　　&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>上面的代码给出了三个模块的文件名，路径默认与main.js在同一个目录（js子目录）。如果这些模块在其他目录，比如js/lib目录，则有两种写法。一种是逐一指定路径。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">　　paths: &#123;</span><br><span class="line">　　　　<span class="string">"jquery"</span>: <span class="string">"lib/jquery.min"</span>,</span><br><span class="line">　　　　<span class="string">"underscore"</span>: <span class="string">"lib/underscore.min"</span>,</span><br><span class="line">　　　　<span class="string">"backbone"</span>: <span class="string">"lib/backbone.min"</span></span><br><span class="line">　　&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>另一种则是直接改变基目录（baseUrl）。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">　　baseUrl: <span class="string">"js/lib"</span>,</span><br><span class="line">　　paths: &#123;</span><br><span class="line">　　　　<span class="string">"jquery"</span>: <span class="string">"jquery.min"</span>,</span><br><span class="line">　　　　<span class="string">"underscore"</span>: <span class="string">"underscore.min"</span>,</span><br><span class="line">　　　　<span class="string">"backbone"</span>: <span class="string">"backbone.min"</span></span><br><span class="line">　　&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>require.js要求，每个模块是一个单独的js文件。这样的话，如果加载多个模块，就会发出多次HTTP请求，会影响网页的加载速度。因此，require.js提供了一个优化工具，当模块部署完毕以后，可以用这个工具将多个模块合并在一个文件中，减少HTTP请求数。</p>
<h3 id="5、AMD模块的写法"><a href="#5、AMD模块的写法" class="headerlink" title="5、AMD模块的写法"></a>5、AMD模块的写法</h3><p>require.js加载的模块，采用AMD规范。也就是说，模块必须按照AMD的规定来写。<br>具体来说，就是模块必须采用特定的define()函数来定义。如果一个模块不依赖其他模块，那么可以直接定义在define()函数之中。<br>假定现在有一个math.js文件，它定义了一个math模块。那么，math.js就要这样写：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// math.js</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">　　<span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">　　　　<span class="keyword">return</span> x+y;</span><br><span class="line">　　&#125;;</span><br><span class="line">　　<span class="keyword">return</span> &#123;</span><br><span class="line">　　　　add: add</span><br><span class="line">　　&#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加载方式</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'math'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">math</span>)</span>&#123;</span><br><span class="line">　　alert(math.add(<span class="number">1</span>,<span class="number">1</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>如果这个模块还依赖其他模块，那么define()函数的第一个参数，必须是一个数组，指明该模块的依赖性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">'myLib'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">myLib</span>)</span>&#123;</span><br><span class="line">　　<span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">　　　　myLib.doSomething();</span><br><span class="line">　　&#125;</span><br><span class="line">　　<span class="keyword">return</span> &#123;</span><br><span class="line">　　　　foo : foo</span><br><span class="line">　　&#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>当require()函数加载上面这个模块的时候，就会先加载myLib.js文件。</p>
<h3 id="6、加载非规范的模块"><a href="#6、加载非规范的模块" class="headerlink" title="6、加载非规范的模块"></a>6、加载非规范的模块</h3><p>理论上，require.js加载的模块，必须是按照AMD规范、用define()函数定义的模块。但是实际上，虽然已经有一部分流行的函数库（比如jQuery）符合AMD规范，更多的库并不符合。那么，require.js是否能够加载非规范的模块呢？<br>回答是可以的。<br>这样的模块在用require()加载之前，要先用require.config()方法，定义它们的一些特征。<br>举例来说，underscore和backbone这两个库，都没有采用AMD规范编写。如果要加载它们的话，必须先定义它们的特征。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">　　shim: &#123;</span><br><span class="line">　　　　<span class="string">'underscore'</span>:&#123;</span><br><span class="line">　　　　　　exports: <span class="string">'_'</span></span><br><span class="line">　　　　&#125;,</span><br><span class="line">　　　　<span class="string">'backbone'</span>: &#123;</span><br><span class="line">　　　　　　deps: [<span class="string">'underscore'</span>, <span class="string">'jquery'</span>],</span><br><span class="line">　　　　　　exports: <span class="string">'Backbone'</span></span><br><span class="line">　　　　&#125;</span><br><span class="line">　　&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>require.config()接受一个配置对象，这个对象除了有前面说过的paths属性之外，还有一个shim属性，专门用来配置不兼容的模块。具体来说，每个模块要定义（1）exports值（输出的变量名），表明这个模块外部调用时的名称；（2）deps数组，表明该模块的依赖性。<br>比如，jQuery的插件可以这样定义：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shim: &#123;</span><br><span class="line">　　<span class="string">'jquery.scroll'</span>: &#123;</span><br><span class="line">　　　　deps: [<span class="string">'jquery'</span>],</span><br><span class="line">　　　　exports: <span class="string">'jQuery.fn.scroll'</span></span><br><span class="line">　　&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="7、require-js插件"><a href="#7、require-js插件" class="headerlink" title="7、require.js插件"></a>7、require.js插件</h3><p>require.js还提供一系列插件，实现一些特定的功能。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// domready插件，可以让回调函数在页面DOM结构加载完成后再运行。</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'domready!'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">doc</span>)</span>&#123;</span><br><span class="line">　　<span class="comment">// called once the DOM is ready</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// text和image插件，则是允许require.js加载文本和图片文件。</span></span><br><span class="line">define([<span class="string">'text!review.txt'</span>, <span class="string">'image!cat.jpg'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">review,cat</span>)</span>&#123;</span><br><span class="line">　　<span class="built_in">console</span>.log(review);</span><br><span class="line">　　<span class="built_in">document</span>.body.appendChild(cat);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//类似的插件还有json和mdown，用于加载json文件和markdown文件。</span></span><br></pre></td></tr></table></figure></p>
<h2 id="六、自己的看法"><a href="#六、自己的看法" class="headerlink" title="六、自己的看法"></a>六、自己的看法</h2><p>&ensp;&ensp;&ensp;&ensp;作为一个前端模块化的菜鸟，看了上面对Javascript模块化的定义，发展以及规范的一些描述，使我对JavaScript模块化有了一定的了解，RequireJS 是一个很优秀的模块加载器，让JavaScript的模块化开发更加简洁，定义了一个作用域来避免全局名称空间污染，并且通过RequireJs的语法，使得模块与模块之间的依赖关系非常明显，同时，它提倡提前执行依赖，通过模块的异步加载，加快了模块的加载速度，虽然异步加载的顺序可能不一定的，通过依赖关系来加载的模块是可确定的，提前执行依赖，有好处也有坏处，好处就是具有良好的用户体检，在一开始加载完依赖后，无需再加载依赖，用户操作的反应速度也会更快，但是坏处就是肯能会存在带宽的浪费，因为提前加载依赖可能在之后的代码运行中不一定会用到。个人觉得有时候为了更好的用户体验，一定的带宽的浪费是可取的。RequireJS特别突出的优点就是，它有着详细文档，丰富案例和活跃的社区论坛，而且使用RequireJS的前端大牛也非常多，当我们存在任何疑问的时候，我们可以通过文档或者咨询前端大牛得到帮助。RequireJS的优势在于异步加载，加快模块加载速度，同时它的坑爹之处也在于它的异步加载，异步加载会导致模块加载顺序不是确定的，如果开发者不注意的话，会造成一些意想不到的结果。</p>
<p>&ensp;&ensp;&ensp;&ensp;聊完了RequireJS，我们再来聊一聊另一种规范的模块加载器：SeaJS，SeaJS 是遵循的 CMD （通用模块定义）规范的模块加载器，CMD规范明确的给定了基本的写法和交互规则，还规定了每一个模块都是一个文件，具体模块的都是使用define关键字来定义的，并且使用exports（对象）用来向外提供模块接口，同时通过require关键字来获取其他模块提供的接口，由此可以看出，CMD规范与Node.js的Modules规范非常相似。SeaJs就是CMD规范的一个明显的代表，通用API只有define, require, require.async, exports, module.exports这五个，所以学习起来非常的快速和方便。SeaJs的代码书写非常简单，SeaJs推崇的是依赖靠近的原则，所以其依赖关系清晰明了，能够提高JavaScript代码的可读性，这是与RequireJS一个很明显的不同点，RequireJS推崇的是依赖前置，RequireJS将模块依赖的关系定义在模块的头部，另一个不同的地方在于，RequireJS对于依赖的模块是提前执行的（RequireJS 2.0后，提供了延迟执行的写法），而SeaJs延迟执行的，SeaJs提倡的是as lazy as possible。提前执行有好处也有坏处，在上面也提到过，所以提前执行的优点还是要看具体运行的环境的。</p>
<p>&ensp;&ensp;&ensp;&ensp;2015年6月17日，ECMAScript 6发布正式版本，ES6在ES5的基础上做了很大的改动，好像听到了前端开发人员对Javascript模块化的强烈呼唤，所以ES6增添了许多必要的特性，比如说：模块和类，由于以前JavaScript没有内置方法来支持模块化，开发者使用模块化的方式并不统一，所以ES6模块化的目标是创建一种 CommonJS 和 AMD 使用者都乐意接受的方式，语法与CommonJS类似，简洁明了，倾向于单一的接口，同时也类似AMD，支持模块的异步加载和配置模块加载，我觉得ES6的好处就是，首先，不需要任何的第三方库可以实现JavaScript的模块化，节约带宽和内存，其次，就是其语法非常简单，一般来说，我们使用export关键词导出对象，这个关键字可以无限次使用；使用import关键字将其它模块导入某一模块中，它可用来导入任意数量的模块。一般情况下，只需要上述两个关键字就实现了模块化。总的来说使用ES6来实现模块化相对于上述两种方案更加方便简洁，我们就静静的等待浏览器对ES6的支持吧，到时候ES6一定会大放光彩。</p>
<p>文章出处：<a href="http://www.ruanyifeng.com/blog/2012/10/javascript_module.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2012/10/javascript_module.html</a></p>

      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

        <a data-url="https://hankliu62.github.io/2015/12/24/javascript-module/" data-id="cltd13bv70007celop9se3qvo" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
</article>



  
    <article id="post-ubuntu-netstat" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2015/12/24/ubuntu-netstat/" class="article-date">
  <time datetime="2015-12-24T10:55:37.000Z" itemprop="datePublished">2015-12-24</time>
</h3>
    
  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content fill-content-true">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/24/ubuntu-netstat/">ubuntu查看和关闭端口</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="一、查看端口"><a href="#一、查看端口" class="headerlink" title="一、查看端口"></a>一、查看端口</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">netstat -anp</span><br><span class="line"></span><br><span class="line">// result</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      -</span><br><span class="line">tcp        0      0 0.0.0.0:27017           0.0.0.0:*               LISTEN      -</span><br><span class="line">tcp        0      0 127.0.0.1:6379          0.0.0.0:*               LISTEN      -</span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      -</span><br><span class="line">tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN      -</span><br><span class="line">tcp        0      0 0.0.0.0:81              0.0.0.0:*               LISTEN      -</span><br><span class="line">tcp        0      0 0.0.0.0:82              0.0.0.0:*               LISTEN      -</span><br><span class="line">tcp        0      0 192.168.222.198:50233   180.97.33.107:443       ESTABLISHED 2361/google-chrome-</span><br><span class="line">...</span><br><span class="line">Active UNIX domain sockets (servers and established)</span><br><span class="line">Proto RefCnt Flags       Type       State         I-Node   PID/Program name    Path</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING     1996     -                   /tmp/mongodb-27017.sock</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING     781      -                   /tmp/.X11-unix/X0</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING     12932    1799/xfce4-session  /tmp/.ICE-unix/1799</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING     12931    1799/xfce4-session  @/tmp/.ICE-unix/1799</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING     15489    1915/fcitx          /tmp/fcitx-socket-:0</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING     16412    2068/sogou-qimpanel /tmp/sogou-qimpaneluser</span><br><span class="line">unix  2      [ ACC ]     STREAM     LISTENING     15796    2361/google-chrome- /tmp/.com.google.Chrome.KwiQ8d/SingletonSocket</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">// 查看某个端口的进程</span><br><span class="line">netstat -anp | grep 8081</span><br><span class="line"></span><br><span class="line">// result</span><br><span class="line">tcp        0      0 127.0.0.1:56770         127.0.0.1:8081          ESTABLISHED 2361/google-chrome-</span><br><span class="line">tcp6       0      0 :::8081                 :::*                    LISTEN      5359/gulp</span><br><span class="line">tcp6       0      0 127.0.0.1:8081          127.0.0.1:56770         ESTABLISHED 5359/gulp</span><br></pre></td></tr></table></figure>
<h2 id="二、关闭某个端口的进程"><a href="#二、关闭某个端口的进程" class="headerlink" title="二、关闭某个端口的进程"></a>二、关闭某个端口的进程</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 5359</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>

        <a data-url="https://hankliu62.github.io/2015/12/24/ubuntu-netstat/" data-id="cltd13bvd000ccelow25pms73" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
</article>



  
  
</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/02/29/commomly-css/">常用的CSS技巧</a>
          </li>
        
          <li>
            <a href="/2024/02/08/interview-questions/">前端面试题汇总</a>
          </li>
        
          <li>
            <a href="/2024/02/07/github-pages/">使用 Github Pages 和 Issues 搭建博客</a>
          </li>
        
          <li>
            <a href="/2018/11/09/git-clone-failure/">使用 git 克隆 github 上的项目失败</a>
          </li>
        
          <li>
            <a href="/2017/09/19/web-mobile-tools-weinre/">使用Weinre调试移动端Web开发</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github-pages/">github pages</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interview/">interview</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mobile/">mobile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/weinre/">weinre</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">二月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2024 HankLiu, Inc. All rights reserved.<br>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">文章</a>
  
    <a href="/toolbox-frontend" class="mobile-nav-link">小工具</a>
  
    <a href="/resume" class="mobile-nav-link">小简介</a>
  
  <a href="#search" class="mobile-nav-link st-search-show-outputs">Search</a>
</nav>
  

<!-- totop start -->
<div id="totop">
	<a title="To Top"></a>
</div>
<!-- totop end -->

<!-- swiftype search start -->

<!-- swiftype search end -->



<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/lrsjng.jquery-qrcode/0.12.0/jquery.qrcode.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

</div>
</body>
</html>
