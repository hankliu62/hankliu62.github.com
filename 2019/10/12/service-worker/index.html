
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  
  <title>Service Worker：提升网页性能与用户体验的关键技术 | HankLiu的博客小屋</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Service Worker：提升网页性能与用户体验的关键技术随着互联网的快速发展，网页应用的复杂性不断提高，对性能和用户体验的要求也日益增强。为了应对这些挑战，浏览器技术也在不断进步，其中 Service Worker 作为一种在浏览器后台独立运行的脚本，成为了优化网页性能、提升用户体验的关键技术。 基本概念Service Worker 是一种运行在浏览器后台的脚本，它独立于网页内容，不会阻塞页">
<meta property="og:type" content="article">
<meta property="og:title" content="Service Worker：提升网页性能与用户体验的关键技术">
<meta property="og:url" content="https://hankliu62.github.io/2019/10/12/service-worker/index.html">
<meta property="og:site_name" content="HankLiu的博客小屋">
<meta property="og:description" content="Service Worker：提升网页性能与用户体验的关键技术随着互联网的快速发展，网页应用的复杂性不断提高，对性能和用户体验的要求也日益增强。为了应对这些挑战，浏览器技术也在不断进步，其中 Service Worker 作为一种在浏览器后台独立运行的脚本，成为了优化网页性能、提升用户体验的关键技术。 基本概念Service Worker 是一种运行在浏览器后台的脚本，它独立于网页内容，不会阻塞页">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/hankliu62/interview/assets/8088864/38008e09-c6ed-4931-9647-dd6a44ffa651">
<meta property="og:image" content="https://github.com/hankliu62/interview/assets/8088864/74471829-ccdc-49fe-b0ec-babd87488e44">
<meta property="article:published_time" content="2019-10-12T18:20:12.000Z">
<meta property="article:modified_time" content="2024-05-14T23:42:33.756Z">
<meta property="article:author" content="HankLiu">
<meta property="article:tag" content="service worker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/hankliu62/interview/assets/8088864/38008e09-c6ed-4931-9647-dd6a44ffa651">
  
  
    <link rel="icon" href="/img/favicon.ico" sizes="16x16">
  
  <link rel="stylesheet" href="/css/style.css?t=1">
  
    <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
  

<meta name="generator" content="Hexo 7.1.1"></head>

<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner">
    <div id="banner-mask"></div>
  </div>
  <div id="header-outer" class="outer">
    <nav id="upper-nav" class="inner">
      <a id="main-nav-toggle" class="nav-icon"></a>
      <div class="sub-nav">
        
        
          <a id="nav-github" class="nav-icon" href="https://github.com/hankliu62"></a>
        
      </div>
    </nav>
    <div id="header-title">
      
        <h1 id="blog-title-wrap">
          <a href="/" id="blog-title">HankLiu的博客小屋</a>
        </h1>
      
      
        <h5 class="blog-subtitle-wrap">努力去听风的声音，不必在意风的方向。</h5>
      
    </div>
    <div id="contenedor">
      <ul class="cube">
        <li class="cara"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="100" width="100" viewBox="-50 -50 200 200">
          <circle cx="50" cy="50" r="45" stroke-width="5" stroke="black" stroke-opacity="0.5" fill-opacity="0"></circle>
          <rect id="clockwise" x="47.5" y="27.5" width="5" height="25" rx="2.5" ry="2.5" fill="black" fill-opacity="0.5" transform="rotate(330 50 50)"></rect>
          <rect id="minute" x="48.5" y="16.5" width="3" height="35" rx="1.5" ry="1.5" fill="black" fill-opacity="0.5"></rect>
        </svg></li>
        <li class="cara">P</li>
        <li class="cara">X</li>
        <li class="cara">L</li>
        <li class="cara">C</li>
        <li class="cara">Y</li>
      </ul>
    </div>
    <nav id="main-nav">
      
        <a class="main-nav-link" href="/">主页</a>
      
        <a class="main-nav-link" href="/archives">文章</a>
      
        <a class="main-nav-link" href="/toolkit">小工具</a>
      
        <a class="main-nav-link" href="/resume">小简介</a>
      
        <a class="main-nav-link" href="/about">小关于</a>
      
    </nav>
  </div>
</header>

    <div class="outer">
      <section id="main"><article id="post-service-worker" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2019/10/12/service-worker/" class="article-date">
  <time datetime="2019-10-12T18:20:12.000Z" itemprop="datePublished">2019-10-12</time>
</h3>
    
  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content fill-content-false">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Service Worker：提升网页性能与用户体验的关键技术
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <h2 id="Service-Worker：提升网页性能与用户体验的关键技术"><a href="#Service-Worker：提升网页性能与用户体验的关键技术" class="headerlink" title="Service Worker：提升网页性能与用户体验的关键技术"></a>Service Worker：提升网页性能与用户体验的关键技术</h2><p>随着互联网的快速发展，网页应用的复杂性不断提高，对性能和用户体验的要求也日益增强。为了应对这些挑战，浏览器技术也在不断进步，其中 <code>Service Worker</code> 作为一种在浏览器后台独立运行的脚本，成为了优化网页性能、提升用户体验的关键技术。</p>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p><code>Service Worker</code> 是一种运行在浏览器后台的脚本，它独立于网页内容，不会阻塞页面的渲染。它允许开发人员在浏览器和网络之间设置一个代理服务器，拦截和处理网络请求，实现缓存、推送通知、消息传递等功能。<code>Service Worker</code> 使得网页能够在离线状态下运行，提高页面加载速度，优化用户体验。</p>
<p><img src="https://github.com/hankliu62/interview/assets/8088864/38008e09-c6ed-4931-9647-dd6a44ffa651" alt="caniuse_service_worker"></p>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><p><code>Service Worker</code> 的生命周期完全独立于网页。</p>
<p>当 <code>Service Worker</code> 被注册成功后，它将开始它的生命周期，我们对 <code>Service Worker</code> 的操作一般都是在其生命周期里面进行的。<code>Service Worker</code> 的生命周期分为下面几个状态：<code>installing</code> -&gt; <code>installed</code> -&gt; <code>activating</code> -&gt; <code>activated</code> -&gt; <code>redundant。</code></p>
<p><img src="https://github.com/hankliu62/interview/assets/8088864/74471829-ccdc-49fe-b0ec-babd87488e44" alt="f54bdb55c775be0498c6efcd55a73020"></p>
<ol>
<li><p><strong>installing(安装)：</strong>这个状态发生在 <code>Service Worker</code> 注册之后，表示开始安装，这个状态会触发 <code>install</code> 事件，一般会在 <code>install</code> 事件的回调里面进行静态资源的离线缓存， 如果这些静态资源缓存失败了，那 <code>Service Worker</code> 安装就会失败，生命周期终止。</p>
</li>
<li><p><strong>installed(安装后)：</strong>当成功捕获缓存到的资源时，<code>Service Worker</code> 会变为这个状态，当此时没有其他的 <code>Service Worker</code> 线程在工作时，会立即进入激活状态，如果此时有正在工作的 <code>Service Worker</code> 工作线程，则会等待其他的 <code>Service Worker</code> 线程被关闭后才会被激活。可以使用 <code>self.skipWaiting()</code> 方法强制正在等待的 <code>Service Worker</code> 工作线程进入激活状态。</p>
</li>
<li><p><strong>activating(激活)：</strong>在这个状态下会触发 <code>activate</code> 事件，在 <code>activate</code> 事件的回调中去清理旧版缓存。</p>
</li>
<li><p><strong>activated(激活后)：</strong>在这个状态下，<code>Service Worker</code> 会取得对整个页面的控制</p>
</li>
<li><p><strong>redundant(废弃状态)：</strong>这个状态表示一个 <code>Service Worker</code> 的生命周期结束。新版本的 <code>Service Worker</code> 替换了旧版本的 <code>Service Worker</code> 会出现这个状态</p>
</li>
</ol>
<h3 id="常用接口"><a href="#常用接口" class="headerlink" title="常用接口"></a>常用接口</h3><ul>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Cache">Cache</a><br>表示用于 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Request">Request</a> &#x2F; <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Response">Response</a> 对象对的存储，作为 <code>Service Worker</code> 生命周期的一部分被缓存。</p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CacheStorage">CacheStorage</a><br>表示 <code>Cache</code> 对象的存储。提供一个所有命名缓存的主目录，<code>Service Worker</code> 可以访问并维护名字字符串到 <code>Cache</code> 对象的映射。</p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Client">Client</a><br>表示 <code>service worker client</code> 的作用域。一个 <code>service worker client</code> 可以是浏览器上下文的一个文档，也可以是一个由 <code>active worker</code> 控制的 <code>Shared Worker</code>。</p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Clients">Clients</a><br>表示一个 <code>Client</code> 对象容器；是访问当前源的活动的 <code>service worker client</code> 的主要途径。</p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ExtendableEvent">ExtendableEvent</a><br>扩展被分发到 <code>ServiceWorkerGlobalScope</code> 的 <code>install</code> 和 <code>activate</code> 事件时序，作为<code> service worker</code> 生命周期的一部分。这会确保任何功能型事件（如 <code>FetchEvent</code>）不被分发到 <code>Service Worker</code>，直到它更新了数据库架构、删除过期缓存项等等以后。</p>
</li>
<li><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ExtendableMessageEvent">ExtendableMessageEvent</a><br>向 <code>Service Worker</code> 触发的 <code>message</code>  事件的时间对象（当 <code>ServiceWorkerGlobalScope</code> 从另一个上下文收到通道消息），延长了此类事件的生命周期。</p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FetchEvent">FetchEvent</a><br>传递给 <code>ServiceWorkerGlobalScope.onfetch</code> 处理函数的参数，<code>FetchEvent</code> 代表一个在 <code>Service Worker</code> 的 <code>ServiceWorkerGlobalScope</code> 中分发的请求动作。它包含关于请求和响应的结果信息，并且提供 <code>FetchEvent.respondWith()</code> 方法，这个方法允许我们提供任意的响应返回到控制页面。</p>
</li>
<li><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/NavigationPreloadManager">NavigationPreloadManager</a><br>提供与 <code>Service Worker</code> 一起管理资源预加载的方法。</p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Navigator/serviceWorker">Navigator.serviceWorker</a><br>返回一个 <code>ServiceWorkerContainer</code> 对象，该对象提供对相关 <code>document</code> 的注册、删除、更新以及与 <code>Service Worker</code> 对象通信的访问。</p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/NotificationEvent">NotificationEvent</a><br>传递给 <code>onnotificationclick</code> 处理函数的参数，<code>NotificationEvent</code> 接口代表在 <code>Service Worker</code> 的 <code>ServiceWorkerGlobalScope</code> 中分发的单击事件通知。</p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ServiceWorker">ServiceWorker</a><br>表示一个 <code>Service Worker</code>。多个浏览的上下文 (例如 <code>page</code>、<code>worker</code> 等等) 都能通过相同的 <code>Service Worker</code> 对象相关联。</p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ServiceWorkerContainer">ServiceWorkerContainer</a><br>提供一个在网络生态中把 <code>service worker</code> 作为一个整体的对象，包括辅助注册，反注册以及更新 <code>service worker</code>，并且访问 <code>service worker</code> 的状态以及他们的注册信息。</p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ServiceWorkerGlobalScope">ServiceWorkerGlobalScope</a><br>表示 <code>service worker</code> 的全局执行上下文。</p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MessageEvent">MessageEvent</a><br>表示发送到 <code>ServiceWorkerGlobalScope</code> 的信息。</p>
</li>
<li><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerRegistration">ServiceWorkerRegistration</a><br>表示 <code>service worker</code> 的注册。</p>
</li>
<li><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowClient">WindowClient</a><br>表示在浏览器上下文中记录的 <code>service worker</code> 客户端的作用域，被活动的工作者控制。是 <code>Client</code> 对象的特殊类型，包含一些附加的方法和可用的属性。</p>
</li>
</ul>
<h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><h4 id="缓存管理"><a href="#缓存管理" class="headerlink" title="缓存管理"></a>缓存管理</h4><p><code>Service Worker</code> 可以拦截和处理网络请求，将资源缓存在本地，实现离线访问和快速加载。开发人员可以根据需求自定义缓存策略，提高网页的加载速度和性能。</p>
<p>下面是一个简单的 Service Worker 缓存管理的例子，用于缓存和提供静态资源。</p>
<p>首先，你需要注册一个 Service Worker：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在你的主 JavaScript 文件中，例如 main.js</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;serviceWorker&#x27;</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">  navigator.<span class="property">serviceWorker</span>.<span class="title function_">register</span>(<span class="string">&#x27;/service-worker.js&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Service Worker 已注册&#x27;</span>))</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Service Worker 注册失败:&#x27;</span>, err));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后，创建一个 service-worker.js 文件，用于定义缓存策略：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// service-worker.js</span></span><br><span class="line"></span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;install&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Perform install steps</span></span><br><span class="line">  event.<span class="title function_">waitUntil</span>(</span><br><span class="line">    caches.<span class="title function_">open</span>(<span class="string">&#x27;my-cache&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">cache</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 打开一个名为 &#x27;my-cache&#x27; 的缓存</span></span><br><span class="line">      <span class="keyword">return</span> cache.<span class="title function_">addAll</span>([</span><br><span class="line">        <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;/styles/main.css&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;/script/main.js&#x27;</span></span><br><span class="line">        <span class="comment">// 你可以添加更多需要缓存的资源</span></span><br><span class="line">      ]);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  event.<span class="title function_">respondWith</span>(</span><br><span class="line">    caches.<span class="title function_">match</span>(event.<span class="property">request</span>)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// Cache hit - return response</span></span><br><span class="line">        <span class="keyword">if</span> (response) &#123;</span><br><span class="line">          <span class="keyword">return</span> response;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">fetch</span>(event.<span class="property">request</span>).<span class="title function_">then</span>(</span><br><span class="line">          <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// Check if we received a valid response</span></span><br><span class="line">            <span class="keyword">if</span> (!res || res.<span class="property">status</span> !== <span class="number">200</span> || res.<span class="property">type</span> !== <span class="string">&#x27;basic&#x27;</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> response;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// Important: Clone the response. A response is a stream and</span></span><br><span class="line">            <span class="comment">// can only be consumed once.</span></span><br><span class="line">            <span class="keyword">const</span> responseToCache = res.<span class="title function_">clone</span>();</span><br><span class="line">            caches.<span class="title function_">open</span>(<span class="string">&#x27;my-cache&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">cache</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="comment">// Take the response from the network,</span></span><br><span class="line">              <span class="comment">// and put a copy in the cache.</span></span><br><span class="line">              cache.<span class="title function_">put</span>(event.<span class="property">request</span>, responseToCache);</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">          &#125;</span><br><span class="line">        );</span><br><span class="line">      &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>这个例子中，当 <code>Service Worker</code> 安装时，它会打开一个名为 <code>&#39;my-cache&#39;</code> 的缓存，并添加一些资源到缓存中。当浏览器请求这些资源时，<code>Service Worker</code> 会首先检查缓存中是否有这些资源。如果有，它会直接从缓存中提供这些资源，而不是从网络上获取。如果缓存中没有这些资源，<code>Service Worker</code> 会从网络上获取它们，然后将它们添加到缓存中，以便下次可以直接从缓存中提供。</p>
<blockquote>
<p>注意，为了简化示例，这里并没有处理所有可能的错误情况，也没有考虑缓存的更新和失效策略。在实际应用中，你可能需要根据你的具体需求来定制你的缓存策略。</p>
</blockquote>
<h4 id="推送通知"><a href="#推送通知" class="headerlink" title="推送通知"></a>推送通知</h4><p><code>Service Worker</code> 可以接收来自服务器的推送消息，即使网页未打开或处于休眠状态，也能向用户发送通知。这一功能使得开发者能够及时向用户传达重要信息，提高应用的活跃度和用户粘性。</p>
<p>下面是一个使用 <code>Service Worker</code> 和 <code>Push API</code> 发送推送通知的基本例子。</p>
<p>首先，你需要注册 <code>Service Worker</code> 并订阅推送消息：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;serviceWorker&#x27;</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">  navigator.<span class="property">serviceWorker</span>.<span class="title function_">register</span>(<span class="string">&#x27;/service-worker.js&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">registration</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Service Worker 注册成功:&#x27;</span>, registration.<span class="property">scope</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 检查浏览器是否支持显示通知</span></span><br><span class="line">      <span class="keyword">if</span> (!(<span class="string">&#x27;Notification&#x27;</span> <span class="keyword">in</span> <span class="variable language_">window</span>)) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&#x27;此浏览器不支持桌面通知&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 检查是否已授予权限</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title class_">Notification</span>.<span class="property">permission</span> === <span class="string">&#x27;granted&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// 如果用户已授予权限，我们可以立即注册推送</span></span><br><span class="line">        <span class="title function_">subscribeUser</span>();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 否则，我们需要询问用户</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title class_">Notification</span>.<span class="property">permission</span> !== <span class="string">&#x27;denied&#x27;</span>) &#123;</span><br><span class="line">        <span class="title class_">Notification</span>.<span class="title function_">requestPermission</span>().<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">permission</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (permission === <span class="string">&#x27;granted&#x27;</span>) &#123;</span><br><span class="line">            <span class="title function_">subscribeUser</span>();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 订阅推送通知</span></span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">subscribeUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> registration.<span class="property">pushManager</span>.<span class="title function_">subscribe</span>(&#123;</span><br><span class="line">          <span class="attr">userVisibleOnly</span>: <span class="literal">true</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">subscription</span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;用户已订阅推送通知:&#x27;</span>, subscription);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 将订阅信息发送到服务器</span></span><br><span class="line">          <span class="title function_">sendSubscriptionToServer</span>(subscription);</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;无法订阅推送通知:&#x27;</span>, err);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 将订阅信息发送到服务器</span></span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">sendSubscriptionToServer</span>(<span class="params">subscription</span>) &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> 将 subscription 发送到你的服务器</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;将订阅信息发送到服务器:&#x27;</span>, subscription);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Service Worker 注册失败:&#x27;</span>, err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后，你需要一个 <code>Service Worker</code> 脚本 (<code>service-worker.js</code>) 来接收和显示推送通知：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// service-worker.js</span></span><br><span class="line"></span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;push&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;收到推送消息:&#x27;</span>, event);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 你可能需要从服务器获取一些数据来显示通知</span></span><br><span class="line">  <span class="comment">// 这里只是一个简单的示例</span></span><br><span class="line">  <span class="keyword">var</span> title = <span class="string">&#x27;推送通知&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> body = <span class="string">&#x27;你收到了一条新消息！&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> icon = <span class="string">&#x27;/images/icon.png&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  event.<span class="title function_">waitUntil</span>(</span><br><span class="line">    self.<span class="property">registration</span>.<span class="title function_">showNotification</span>(title, &#123;</span><br><span class="line">      <span class="attr">body</span>: body,</span><br><span class="line">      <span class="attr">icon</span>: icon</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;notificationclick&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;用户点击了通知:&#x27;</span>, event);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 用户点击通知后，你可以执行一些操作，例如打开一个新的页面</span></span><br><span class="line">  event.<span class="property">notification</span>.<span class="title function_">close</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 例如，打开一个特定的 URL</span></span><br><span class="line">  event.<span class="title function_">waitUntil</span>(</span><br><span class="line">    clients.<span class="title function_">openWindow</span>(<span class="string">&#x27;https://example.com/notification-clicked&#x27;</span>)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>请注意，为了实际使用推送通知，你还需要一个服务器端的组件来发送推送消息。这通常涉及到使用 <code>Web Push Protocol (Web Push)</code> 与用户的浏览器进行通信。此外，你可能需要配置你的服务器以接收订阅信息，并在需要时发送推送消息。</p>
</blockquote>
<blockquote>
<p>此外，由于推送通知和 <code>Service Worker</code> 的复杂性，这里提供的代码只是一个起点。在生产环境中，你可能需要处理更多细节，如错误处理、用户权限管理、通知内容的动态生成等。</p>
</blockquote>
<h4 id="消息传递"><a href="#消息传递" class="headerlink" title="消息传递"></a>消息传递</h4><p><code>Service Worker</code> 可以与其他浏览器环境（如页面、扩展程序等）进行双向通信，实现消息传递和共享数据。这使得开发者能够在不同环境之间传递信息，实现更复杂的功能和更好的用户体验。</p>
<p>下面是一个简单的 <code>Service Worker</code> 消息传递的例子。</p>
<p>首先，注册并启动 <code>Service Worker</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;serviceWorker&#x27;</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">  navigator.<span class="property">serviceWorker</span>.<span class="title function_">register</span>(<span class="string">&#x27;/service-worker.js&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">registration</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Service Worker 注册成功:&#x27;</span>, registration.<span class="property">scope</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 向 Service Worker 发送消息</span></span><br><span class="line">      registration.<span class="property">active</span>.<span class="title function_">postMessage</span>(&#123; <span class="attr">action</span>: <span class="string">&#x27;hello&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 监听来自 Service Worker 的消息</span></span><br><span class="line">      navigator.<span class="property">serviceWorker</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;收到来自 Service Worker 的消息:&#x27;</span>, event.<span class="property">data</span>);</span><br><span class="line">        <span class="keyword">if</span> (event.<span class="property">data</span>.<span class="property">action</span> === <span class="string">&#x27;response&#x27;</span>) &#123;</span><br><span class="line">          <span class="title function_">alert</span>(<span class="string">&#x27;Service Worker 回应了: &#x27;</span> + event.<span class="property">data</span>.<span class="property">message</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Service Worker 注册失败:&#x27;</span>, err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后，在 <code>service-worker.js</code> 中处理接收到的消息，并发送响应：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// service-worker.js</span></span><br><span class="line"></span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;install&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  event.<span class="title function_">waitUntil</span>(</span><br><span class="line">    caches.<span class="title function_">open</span>(<span class="string">&#x27;my-cache&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">cache</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 缓存逻辑</span></span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;activate&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 激活逻辑</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 拦截请求和响应的逻辑</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">self.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;收到来自页面的消息:&#x27;</span>, event.<span class="property">data</span>);</span><br><span class="line">  <span class="keyword">if</span> (event.<span class="property">data</span>.<span class="property">action</span> === <span class="string">&#x27;hello&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 向页面发送回应</span></span><br><span class="line">    event.<span class="property">ports</span>[<span class="number">0</span>].<span class="title function_">postMessage</span>(&#123; <span class="attr">action</span>: <span class="string">&#x27;response&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;你好，页面！&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在这个例子中，当页面加载并成功注册 <code>Service Worker</code> 后，它会向 <code>Service Worker</code> 发送一个包含 <code>action: &#39;hello&#39;</code> 的消息。<code>Service Worker</code> 监听到这个消息后，会打印出收到的消息内容，并通过 <code>event.ports[0].postMessage</code> 向页面发送一个回应消息，其中包含了 <code>action: &#39;response&#39;</code> 和一条消息字符串。</p>
<p>页面通过监听 <code>message</code> 事件来接收来自 <code>Service Worker</code> 的回应，并在控制台中打印出消息内容。如果回应消息中的 <code>action</code> 是 <code>&#39;response&#39;</code>，页面会弹出一个警告框显示收到的消息。</p>
<blockquote>
<p>请注意，<code>postMessage API</code> 允许在 <code>Service Worker</code> 和页面之间传递结构化数据，如对象、数组、字符串等。但是，出于安全考虑，不能直接传递函数、DOM 对象或其他某些类型的数据。此外，<code>event.ports</code> 提供了一个双向通信的通道，允许 <code>Service Worker</code> 和页面之间进行更复杂的交互。</p>
</blockquote>
<h3 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h3><h4 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h4><ol>
<li><strong>提高网页性能：</strong>通过缓存管理，<code>Service Worker</code> 可以减少网络请求，降低带宽消耗，提高网页加载速度。</li>
<li><strong>提升用户体验：</strong><code>Service Worker</code> 可以实现离线访问、推送通知等功能，提高用户的满意度和粘性。</li>
<li><strong>拓展性强：</strong><code>Service Worker</code> 可以与其他浏览器环境进行通信，为开发者提供更多可能性。</li>
</ol>
<h4 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h4><ol>
<li><strong>兼容性问题：</strong>虽然主流浏览器都支持 <code>Service Worker</code> ，但在一些旧版本或非主流浏览器中可能无法使用。</li>
<li><strong>学习成本高：</strong>使用 <code>Service Worker</code> 需要一定的技术储备和学习成本，对于初学者来说可能有一定的难度。</li>
</ol>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><code>Service Worker</code> 作为一种在浏览器后台运行的脚本技术，为优化网页性能和提升用户体验提供了有力支持。通过缓存管理、推送通知和消息传递等功能，<code>Service Worker</code> 使得网页能够在离线状态下运行，提高加载速度，及时向用户传达重要信息，实现更复杂的功能和更好的用户体验。虽然存在一些兼容性和学习成本的问题，但随着技术的不断发展和普及，相信 <code>Service Worker</code> 将在未来的网页开发中发挥越来越重要的作用。</p>

      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/service-worker/" rel="tag">service worker</a></li></ul>

        <a data-url="https://hankliu62.github.io/2019/10/12/service-worker/" data-id="clw71fv0n001bs8owgseyfp3e" class="article-share-link">Share</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/10/12/commomly-css/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          常用的CSS技巧
        
      </div>
    </a>
  
  
    <a href="/2019/05/12/mobile-debugging-tools/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">H5 移动端调试工具汇总</div>
    </a>
  
</nav>

  
</article>


</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/05/02/github-action-auto-git-tag/">使用 GitHub Actions 自动推送 Git Tag</a>
          </li>
        
          <li>
            <a href="/2024/04/24/react-fiber-struct/">浅入解析 React Fiber 结构</a>
          </li>
        
          <li>
            <a href="/2024/04/20/communication-across-browser-tabs/">跨浏览器标签页进行通讯的方式简介</a>
          </li>
        
          <li>
            <a href="/2024/04/16/webrtc/">WebRTC:实时通信的未来</a>
          </li>
        
          <li>
            <a href="/2024/04/14/fontend-optimize-indicators/">Web前端最新优化指标：从FP到FPS的全面解析</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/" rel="tag">blog</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/" rel="tag">canvas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/csrf/" rel="tag">csrf</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debugging/" rel="tag">debugging</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github-pages/" rel="tag">github pages</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/homebrew/" rel="tag">homebrew</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/" rel="tag">html5</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interview/" rel="tag">interview</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/loader/" rel="tag">loader</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/miniprogram/" rel="tag">miniprogram</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mobile/" rel="tag">mobile</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/" rel="tag">network</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/optimize/" rel="tag">optimize</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reptile/" rel="tag">reptile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/" rel="tag">security</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/service-worker/" rel="tag">service worker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/" rel="tag">shell</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/" rel="tag">sql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tag/" rel="tag">tag</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/translate/" rel="tag">translate</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vitepress/" rel="tag">vitepress</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webrtc/" rel="tag">webrtc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webworker/" rel="tag">webworker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/weinre/" rel="tag">weinre</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xss/" rel="tag">xss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yuv/" rel="tag">yuv</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">四月 2024</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">二月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">一月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">一月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2024 HankLiu, Inc. All rights reserved.<br>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">文章</a>
  
    <a href="/toolkit" class="mobile-nav-link">小工具</a>
  
    <a href="/resume" class="mobile-nav-link">小简介</a>
  
    <a href="/about" class="mobile-nav-link">小关于</a>
  
  <a href="#search" class="mobile-nav-link st-search-show-outputs">Search</a>
</nav>
  

<!-- totop start -->
<div id="totop">
	<a title="To Top"></a>
</div>
<!-- totop end -->

<!-- swiftype search start -->

<!-- swiftype search end -->



<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/lrsjng.jquery-qrcode/0.12.0/jquery.qrcode.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


</div>
</body>
</html>
